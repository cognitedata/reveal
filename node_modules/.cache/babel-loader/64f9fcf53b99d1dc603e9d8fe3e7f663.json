{"ast":null,"code":"var _jsxFileName = \"/Volumes/csvol/fusion/apps/functions-ui/src/components/buttons/DeleteScheduleButton.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Modal, notification } from 'antd';\nimport { deleteSchedule } from 'utils/api';\nimport { Button } from '@cognite/cogs.js';\nimport { allSchedulesKey } from '../../utils/queryKeys';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DeleteScheduleButton({\n  id\n}) {\n  _s();\n  const queryCache = useQueryClient();\n  const {\n    mutate: doDelete,\n    isLoading,\n    isSuccess,\n    isError\n  } = useMutation(deleteSchedule, {\n    onSuccess() {\n      queryCache.invalidateQueries([allSchedulesKey]);\n    }\n  });\n  useEffect(() => {\n    if (isSuccess) {\n      notification.success({\n        message: 'Success',\n        description: `Schedule ${id} deleted successfully`\n      });\n    }\n  }, [isSuccess, id]);\n  useEffect(() => {\n    if (isError) {\n      notification.error({\n        message: 'Error',\n        description: `An error occured when trying to delete schedule ${id}`,\n        key: 'schedules'\n      });\n    }\n  }, [isError, id]);\n  return /*#__PURE__*/_jsxDEV(Button, {\n    icon: isLoading ? 'Loader' : 'Delete',\n    onClick: e => {\n      e.stopPropagation();\n      Modal.confirm({\n        title: 'Are you sure?',\n        content: 'Are you sure you want to delete this schedule?',\n        onOk: () => {\n          doDelete(id);\n        },\n        onCancel: () => {},\n        okText: 'Delete'\n      });\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(DeleteScheduleButton, \"ThUnoVFgl6mejtMLUS97c/bRkzI=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = DeleteScheduleButton;\nvar _c;\n$RefreshReg$(_c, \"DeleteScheduleButton\");","map":{"version":3,"names":["React","useEffect","useMutation","useQueryClient","Modal","notification","deleteSchedule","Button","allSchedulesKey","DeleteScheduleButton","id","queryCache","mutate","doDelete","isLoading","isSuccess","isError","onSuccess","invalidateQueries","success","message","description","error","key","e","stopPropagation","confirm","title","content","onOk","onCancel","okText"],"sources":["/Volumes/csvol/fusion/apps/functions-ui/src/components/buttons/DeleteScheduleButton.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Modal, notification } from 'antd';\nimport { deleteSchedule } from 'utils/api';\n\nimport { Button } from '@cognite/cogs.js';\n\nimport { allSchedulesKey } from '../../utils/queryKeys';\n\ntype Props = {\n  id: number;\n};\n\nexport default function DeleteScheduleButton({ id }: Props) {\n  const queryCache = useQueryClient();\n  const {\n    mutate: doDelete,\n    isLoading,\n    isSuccess,\n    isError,\n  } = useMutation(deleteSchedule, {\n    onSuccess() {\n      queryCache.invalidateQueries([allSchedulesKey]);\n    },\n  });\n\n  useEffect(() => {\n    if (isSuccess) {\n      notification.success({\n        message: 'Success',\n        description: `Schedule ${id} deleted successfully`,\n      });\n    }\n  }, [isSuccess, id]);\n  useEffect(() => {\n    if (isError) {\n      notification.error({\n        message: 'Error',\n        description: `An error occured when trying to delete schedule ${id}`,\n        key: 'schedules',\n      });\n    }\n  }, [isError, id]);\n\n  return (\n    <Button\n      icon={isLoading ? 'Loader' : 'Delete'}\n      onClick={(e) => {\n        e.stopPropagation();\n        Modal.confirm({\n          title: 'Are you sure?',\n          content: 'Are you sure you want to delete this schedule?',\n          onOk: () => {\n            doDelete(id);\n          },\n          onCancel: () => {},\n          okText: 'Delete',\n        });\n      }}\n    />\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,SAASC,WAAW,EAAEC,cAAc,QAAQ,uBAAuB;AACnE,SAASC,KAAK,EAAEC,YAAY,QAAQ,MAAM;AAC1C,SAASC,cAAc,QAAQ,WAAW;AAE1C,SAASC,MAAM,QAAQ,kBAAkB;AAEzC,SAASC,eAAe,QAAQ,uBAAuB;AAAC;AAMxD,eAAe,SAASC,oBAAoB,CAAC;EAAEC;AAAU,CAAC,EAAE;EAAA;EAC1D,MAAMC,UAAU,GAAGR,cAAc,EAAE;EACnC,MAAM;IACJS,MAAM,EAAEC,QAAQ;IAChBC,SAAS;IACTC,SAAS;IACTC;EACF,CAAC,GAAGd,WAAW,CAACI,cAAc,EAAE;IAC9BW,SAAS,GAAG;MACVN,UAAU,CAACO,iBAAiB,CAAC,CAACV,eAAe,CAAC,CAAC;IACjD;EACF,CAAC,CAAC;EAEFP,SAAS,CAAC,MAAM;IACd,IAAIc,SAAS,EAAE;MACbV,YAAY,CAACc,OAAO,CAAC;QACnBC,OAAO,EAAE,SAAS;QAClBC,WAAW,EAAG,YAAWX,EAAG;MAC9B,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACK,SAAS,EAAEL,EAAE,CAAC,CAAC;EACnBT,SAAS,CAAC,MAAM;IACd,IAAIe,OAAO,EAAE;MACXX,YAAY,CAACiB,KAAK,CAAC;QACjBF,OAAO,EAAE,OAAO;QAChBC,WAAW,EAAG,mDAAkDX,EAAG,EAAC;QACpEa,GAAG,EAAE;MACP,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACP,OAAO,EAAEN,EAAE,CAAC,CAAC;EAEjB,oBACE,QAAC,MAAM;IACL,IAAI,EAAEI,SAAS,GAAG,QAAQ,GAAG,QAAS;IACtC,OAAO,EAAGU,CAAC,IAAK;MACdA,CAAC,CAACC,eAAe,EAAE;MACnBrB,KAAK,CAACsB,OAAO,CAAC;QACZC,KAAK,EAAE,eAAe;QACtBC,OAAO,EAAE,gDAAgD;QACzDC,IAAI,EAAE,MAAM;UACVhB,QAAQ,CAACH,EAAE,CAAC;QACd,CAAC;QACDoB,QAAQ,EAAE,MAAM,CAAC,CAAC;QAClBC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ;EAAE;IAAA;IAAA;IAAA;EAAA,QACF;AAEN;AAAC,GAhDuBtB,oBAAoB;EAAA,QACvBN,cAAc,EAM7BD,WAAW;AAAA;AAAA,KAPOO,oBAAoB;AAAA;AAAA"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo } from 'react';\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { useSDK } from '@cognite/sdk-provider';\nimport { queryKeys } from '../../../queryKeys';\nimport { getAssetsList } from '../network';\nexport const useAssetsListQuery = ({\n  filter,\n  advancedFilter,\n  sort,\n  limit\n} = {}, options) => {\n  _s();\n  const sdk = useSDK();\n  const {\n    data,\n    ...rest\n  } = useInfiniteQuery(queryKeys.listAssets([advancedFilter, filter, limit, sort]), ({\n    pageParam\n  }) => {\n    return getAssetsList(sdk, {\n      cursor: pageParam,\n      filter,\n      advancedFilter,\n      sort,\n      limit\n    });\n  }, {\n    getNextPageParam: param => param.nextCursor,\n    ...options\n  });\n  const flattenData = useMemo(() => (data?.pages || []).flatMap(({\n    items\n  }) => items), [data?.pages]);\n  return {\n    data: flattenData,\n    ...rest\n  };\n};\n_s(useAssetsListQuery, \"6IC/fW+iZi+0XGnsYqC8KTGR+Gw=\", false, function () {\n  return [useSDK, useInfiniteQuery];\n});","map":{"version":3,"names":["useMemo","useInfiniteQuery","useSDK","queryKeys","getAssetsList","useAssetsListQuery","filter","advancedFilter","sort","limit","options","sdk","data","rest","listAssets","pageParam","cursor","getNextPageParam","param","nextCursor","flattenData","pages","flatMap","items"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/assets/service/queries/useAssetsListQuery.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport {\n  useInfiniteQuery,\n  UseInfiniteQueryOptions,\n} from '@tanstack/react-query';\n\nimport { AssetFilterProps } from '@cognite/sdk';\nimport { useSDK } from '@cognite/sdk-provider';\n\nimport { AdvancedFilter } from '../../../builders';\nimport { queryKeys } from '../../../queryKeys';\nimport { InternalSortBy } from '../../../types';\nimport { AssetsProperties } from '../../internal';\nimport { getAssetsList } from '../network';\n\nexport const useAssetsListQuery = (\n  {\n    filter,\n    advancedFilter,\n    sort,\n    limit,\n  }: {\n    filter?: AssetFilterProps;\n    advancedFilter?: AdvancedFilter<AssetsProperties>;\n    sort?: InternalSortBy[];\n    limit?: number;\n  } = {},\n  options?: UseInfiniteQueryOptions\n) => {\n  const sdk = useSDK();\n\n  const { data, ...rest } = useInfiniteQuery(\n    queryKeys.listAssets([advancedFilter, filter, limit, sort]),\n    ({ pageParam }) => {\n      return getAssetsList(sdk, {\n        cursor: pageParam,\n        filter,\n        advancedFilter,\n        sort,\n        limit,\n      });\n    },\n    {\n      getNextPageParam: (param) => param.nextCursor,\n      ...(options as any),\n    }\n  );\n\n  const flattenData = useMemo(\n    () => (data?.pages || []).flatMap(({ items }) => items),\n    [data?.pages]\n  );\n\n  return { data: flattenData, ...rest };\n};\n"],"mappings":";AAAA,SAASA,OAAO,QAAQ,OAAO;AAE/B,SACEC,gBAAgB,QAEX,uBAAuB;AAG9B,SAASC,MAAM,QAAQ,uBAAuB;AAG9C,SAASC,SAAS,QAAQ,oBAAoB;AAG9C,SAASC,aAAa,QAAQ,YAAY;AAE1C,OAAO,MAAMC,kBAAkB,GAAG,CAChC;EACEC,MAAM;EACNC,cAAc;EACdC,IAAI;EACJC;AAMF,CAAC,GAAG,CAAC,CAAC,EACNC,OAAiC,KAC9B;EAAA;EACH,MAAMC,GAAG,GAAGT,MAAM,EAAE;EAEpB,MAAM;IAAEU,IAAI;IAAE,GAAGC;EAAK,CAAC,GAAGZ,gBAAgB,CACxCE,SAAS,CAACW,UAAU,CAAC,CAACP,cAAc,EAAED,MAAM,EAAEG,KAAK,EAAED,IAAI,CAAC,CAAC,EAC3D,CAAC;IAAEO;EAAU,CAAC,KAAK;IACjB,OAAOX,aAAa,CAACO,GAAG,EAAE;MACxBK,MAAM,EAAED,SAAS;MACjBT,MAAM;MACNC,cAAc;MACdC,IAAI;MACJC;IACF,CAAC,CAAC;EACJ,CAAC,EACD;IACEQ,gBAAgB,EAAGC,KAAK,IAAKA,KAAK,CAACC,UAAU;IAC7C,GAAIT;EACN,CAAC,CACF;EAED,MAAMU,WAAW,GAAGpB,OAAO,CACzB,MAAM,CAACY,IAAI,EAAES,KAAK,IAAI,EAAE,EAAEC,OAAO,CAAC,CAAC;IAAEC;EAAM,CAAC,KAAKA,KAAK,CAAC,EACvD,CAACX,IAAI,EAAES,KAAK,CAAC,CACd;EAED,OAAO;IAAET,IAAI,EAAEQ,WAAW;IAAE,GAAGP;EAAK,CAAC;AACvC,CAAC;AAAC,GAvCWR,kBAAkB;EAAA,QAcjBH,MAAM,EAEQD,gBAAgB;AAAA"},"metadata":{},"sourceType":"module"}
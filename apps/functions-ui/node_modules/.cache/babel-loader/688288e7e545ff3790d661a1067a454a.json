{"ast":null,"code":"var _jsxFileName = \"/Volumes/csvol/fusion/libs/copilot-core/src/app/components/CopilotButton.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useFlag } from '@cognite/react-feature-flags';\nimport { ReactComponent as CopilotIcon } from '../../assets/CopilotIcon.svg';\nimport zIndex from '../utils/zIndex';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const COPILOT_TOGGLE = 'COPILOT_TOGGLE';\nexport const CopilotButton = () => {\n  _s();\n  const [isCopilotVisible, setCopilotVisible] = useState(false);\n  const [hasImportMap, setHasImportMap] = useState(false);\n  useEffect(() => {\n    const listener = ev => {\n      if ('detail' in ev) {\n        const toggleEvent = ev;\n        if ('active' in toggleEvent.detail) {\n          setCopilotVisible(toggleEvent.detail.active || false);\n        }\n      }\n    };\n    window.addEventListener(COPILOT_TOGGLE, listener);\n    return () => {\n      window.removeEventListener(COPILOT_TOGGLE, listener);\n    };\n  }, [isCopilotVisible]);\n  useEffect(() => {\n    setHasImportMap(!!document.querySelector('import-map-overrides-full'));\n  }, []);\n  const {\n    isEnabled\n  } = useFlag('COGNITE_COPILOT', {\n    fallback: false,\n    forceRerender: true\n  });\n  if (!isEnabled) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  }\n  return /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n    style: {\n      right: hasImportMap ? 70 : 10\n    },\n    onClick: () => {\n      window.dispatchEvent(new CustomEvent(COPILOT_TOGGLE, {\n        detail: {\n          active: !isCopilotVisible\n        }\n      }));\n    },\n    children: /*#__PURE__*/_jsxDEV(CopilotIcon, {\n      style: {\n        height: 24,\n        width: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(CopilotButton, \"rEfrHdCTd52CPnExlLHwjCcUqOc=\", false, function () {\n  return [useFlag];\n});\n_c = CopilotButton;\nconst ButtonWrapper = /*#__PURE__*/styled.div.withConfig({\n  displayName: \"CopilotButton__ButtonWrapper\",\n  componentId: \"sc-1xq7qbx-0\"\n})([\"z-index:\", \";position:fixed;bottom:10px;width:50px;height:50px;background:#ffffff;box-shadow:0px 1px 16px 4px rgba(79,82,104,0.1),0px 1px 8px rgba(79,82,104,0.08),0px 1px 2px rgba(79,82,104,0.24);border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;\"], zIndex.MAXIMUM);\n_c2 = ButtonWrapper;\nvar _c, _c2;\n$RefreshReg$(_c, \"CopilotButton\");\n$RefreshReg$(_c2, \"ButtonWrapper\");","map":{"version":3,"names":["React","useEffect","useState","styled","useFlag","ReactComponent","CopilotIcon","zIndex","COPILOT_TOGGLE","CopilotButton","isCopilotVisible","setCopilotVisible","hasImportMap","setHasImportMap","listener","ev","toggleEvent","detail","active","window","addEventListener","removeEventListener","document","querySelector","isEnabled","fallback","forceRerender","right","dispatchEvent","CustomEvent","height","width","ButtonWrapper","div","MAXIMUM"],"sources":["/Volumes/csvol/fusion/libs/copilot-core/src/app/components/CopilotButton.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport styled from 'styled-components';\n\nimport { useFlag } from '@cognite/react-feature-flags';\n\nimport { ReactComponent as CopilotIcon } from '../../assets/CopilotIcon.svg';\nimport zIndex from '../utils/zIndex';\nexport const COPILOT_TOGGLE = 'COPILOT_TOGGLE';\n\nexport const CopilotButton = (): JSX.Element => {\n  const [isCopilotVisible, setCopilotVisible] = useState<boolean>(false);\n  const [hasImportMap, setHasImportMap] = useState<boolean>(false);\n\n  useEffect(() => {\n    const listener = (ev: Event) => {\n      if ('detail' in ev) {\n        const toggleEvent = ev as CustomEvent<{ active?: boolean }>;\n        if ('active' in toggleEvent.detail) {\n          setCopilotVisible(toggleEvent.detail.active || false);\n        }\n      }\n    };\n    window.addEventListener(COPILOT_TOGGLE, listener);\n    return () => {\n      window.removeEventListener(COPILOT_TOGGLE, listener);\n    };\n  }, [isCopilotVisible]);\n\n  useEffect(() => {\n    setHasImportMap(!!document.querySelector('import-map-overrides-full'));\n  }, []);\n\n  const { isEnabled } = useFlag('COGNITE_COPILOT', {\n    fallback: false,\n    forceRerender: true,\n  });\n\n  if (!isEnabled) {\n    return <></>;\n  }\n\n  return (\n    <ButtonWrapper\n      style={{ right: hasImportMap ? 70 : 10 }}\n      onClick={() => {\n        window.dispatchEvent(\n          new CustomEvent(COPILOT_TOGGLE, {\n            detail: { active: !isCopilotVisible },\n          })\n        );\n      }}\n    >\n      <CopilotIcon style={{ height: 24, width: 24 }} />\n    </ButtonWrapper>\n  );\n};\n\nconst ButtonWrapper = styled.div`\n  z-index: ${zIndex.MAXIMUM};\n  position: fixed;\n  bottom: 10px;\n  width: 50px;\n  height: 50px;\n  background: #ffffff;\n\n  box-shadow: 0px 1px 16px 4px rgba(79, 82, 104, 0.1),\n    0px 1px 8px rgba(79, 82, 104, 0.08), 0px 1px 2px rgba(79, 82, 104, 0.24);\n  border-radius: 8px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n`;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,OAAOC,MAAM,MAAM,mBAAmB;AAEtC,SAASC,OAAO,QAAQ,8BAA8B;AAEtD,SAASC,cAAc,IAAIC,WAAW,QAAQ,8BAA8B;AAC5E,OAAOC,MAAM,MAAM,iBAAiB;AAAC;AAAA;AACrC,OAAO,MAAMC,cAAc,GAAG,gBAAgB;AAE9C,OAAO,MAAMC,aAAa,GAAG,MAAmB;EAAA;EAC9C,MAAM,CAACC,gBAAgB,EAAEC,iBAAiB,CAAC,GAAGT,QAAQ,CAAU,KAAK,CAAC;EACtE,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGX,QAAQ,CAAU,KAAK,CAAC;EAEhED,SAAS,CAAC,MAAM;IACd,MAAMa,QAAQ,GAAIC,EAAS,IAAK;MAC9B,IAAI,QAAQ,IAAIA,EAAE,EAAE;QAClB,MAAMC,WAAW,GAAGD,EAAuC;QAC3D,IAAI,QAAQ,IAAIC,WAAW,CAACC,MAAM,EAAE;UAClCN,iBAAiB,CAACK,WAAW,CAACC,MAAM,CAACC,MAAM,IAAI,KAAK,CAAC;QACvD;MACF;IACF,CAAC;IACDC,MAAM,CAACC,gBAAgB,CAACZ,cAAc,EAAEM,QAAQ,CAAC;IACjD,OAAO,MAAM;MACXK,MAAM,CAACE,mBAAmB,CAACb,cAAc,EAAEM,QAAQ,CAAC;IACtD,CAAC;EACH,CAAC,EAAE,CAACJ,gBAAgB,CAAC,CAAC;EAEtBT,SAAS,CAAC,MAAM;IACdY,eAAe,CAAC,CAAC,CAACS,QAAQ,CAACC,aAAa,CAAC,2BAA2B,CAAC,CAAC;EACxE,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM;IAAEC;EAAU,CAAC,GAAGpB,OAAO,CAAC,iBAAiB,EAAE;IAC/CqB,QAAQ,EAAE,KAAK;IACfC,aAAa,EAAE;EACjB,CAAC,CAAC;EAEF,IAAI,CAACF,SAAS,EAAE;IACd,oBAAO,qCAAK;EACd;EAEA,oBACE,QAAC,aAAa;IACZ,KAAK,EAAE;MAAEG,KAAK,EAAEf,YAAY,GAAG,EAAE,GAAG;IAAG,CAAE;IACzC,OAAO,EAAE,MAAM;MACbO,MAAM,CAACS,aAAa,CAClB,IAAIC,WAAW,CAACrB,cAAc,EAAE;QAC9BS,MAAM,EAAE;UAAEC,MAAM,EAAE,CAACR;QAAiB;MACtC,CAAC,CAAC,CACH;IACH,CAAE;IAAA,uBAEF,QAAC,WAAW;MAAC,KAAK,EAAE;QAAEoB,MAAM,EAAE,EAAE;QAAEC,KAAK,EAAE;MAAG;IAAE;MAAA;MAAA;MAAA;IAAA;EAAG;IAAA;IAAA;IAAA;EAAA,QACnC;AAEpB,CAAC;AAAC,GA9CWtB,aAAa;EAAA,QAuBFL,OAAO;AAAA;AAAA,KAvBlBK,aAAa;AAgD1B,MAAMuB,aAAa,gBAAG7B,MAAM,CAAC8B,GAAG;EAAA;EAAA;AAAA,qSACnB1B,MAAM,CAAC2B,OAAO,CAe1B;AAAC,MAhBIF,aAAa;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module"}
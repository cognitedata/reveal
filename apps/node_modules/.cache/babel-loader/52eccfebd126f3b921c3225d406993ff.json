{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo } from 'react';\nimport { useTimeseriesLatestDataPointQuery } from '../../service';\nexport const useTimeseriesWithDatapointsQuery = (timeseries, beforeDate, isEnabled = true) => {\n  _s();\n  const {\n    data: timeseriesDataPoints = [],\n    ...rest\n  } = useTimeseriesLatestDataPointQuery(timeseries.map(id => ({\n    id,\n    before: beforeDate\n  })), {\n    enabled: isEnabled && timeseries.length > 0,\n    keepPreviousData: true\n  });\n  const timeseriesWithDatapointsMap = useMemo(() => timeseriesDataPoints.reduce((acc, item) => ({\n    ...acc,\n    [item.id]: item.datapoints[0]?.timestamp\n  }), {}), [timeseriesDataPoints]);\n  return {\n    data: timeseriesWithDatapointsMap,\n    ...rest\n  };\n};\n_s(useTimeseriesWithDatapointsQuery, \"uUIc8HpQrkXSQclPCX5H26xTjRA=\", false, function () {\n  return [useTimeseriesLatestDataPointQuery];\n});","map":{"version":3,"names":["useMemo","useTimeseriesLatestDataPointQuery","useTimeseriesWithDatapointsQuery","timeseries","beforeDate","isEnabled","data","timeseriesDataPoints","rest","map","id","before","enabled","length","keepPreviousData","timeseriesWithDatapointsMap","reduce","acc","item","datapoints","timestamp"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/timeseries/internal/queries/useTimeseriesWithDatapointsQuery.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport { useTimeseriesLatestDataPointQuery } from '../../service';\n\nexport const useTimeseriesWithDatapointsQuery = (\n  timeseries: number[],\n  beforeDate?: Date,\n  isEnabled = true\n) => {\n  const { data: timeseriesDataPoints = [], ...rest } =\n    useTimeseriesLatestDataPointQuery(\n      timeseries.map((id) => ({\n        id,\n        before: beforeDate,\n      })),\n      {\n        enabled: isEnabled && timeseries.length > 0,\n        keepPreviousData: true,\n      }\n    );\n\n  const timeseriesWithDatapointsMap = useMemo(\n    () =>\n      timeseriesDataPoints.reduce(\n        (acc, item) => ({\n          ...acc,\n          [item.id]: item.datapoints[0]?.timestamp,\n        }),\n        {} as Record<number, Date | undefined>\n      ),\n    [timeseriesDataPoints]\n  );\n\n  return { data: timeseriesWithDatapointsMap, ...rest };\n};\n"],"mappings":";AAAA,SAASA,OAAO,QAAQ,OAAO;AAE/B,SAASC,iCAAiC,QAAQ,eAAe;AAEjE,OAAO,MAAMC,gCAAgC,GAAG,CAC9CC,UAAoB,EACpBC,UAAiB,EACjBC,SAAS,GAAG,IAAI,KACb;EAAA;EACH,MAAM;IAAEC,IAAI,EAAEC,oBAAoB,GAAG,EAAE;IAAE,GAAGC;EAAK,CAAC,GAChDP,iCAAiC,CAC/BE,UAAU,CAACM,GAAG,CAAEC,EAAE,KAAM;IACtBA,EAAE;IACFC,MAAM,EAAEP;EACV,CAAC,CAAC,CAAC,EACH;IACEQ,OAAO,EAAEP,SAAS,IAAIF,UAAU,CAACU,MAAM,GAAG,CAAC;IAC3CC,gBAAgB,EAAE;EACpB,CAAC,CACF;EAEH,MAAMC,2BAA2B,GAAGf,OAAO,CACzC,MACEO,oBAAoB,CAACS,MAAM,CACzB,CAACC,GAAG,EAAEC,IAAI,MAAM;IACd,GAAGD,GAAG;IACN,CAACC,IAAI,CAACR,EAAE,GAAGQ,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,EAAEC;EACjC,CAAC,CAAC,EACF,CAAC,CAAC,CACH,EACH,CAACb,oBAAoB,CAAC,CACvB;EAED,OAAO;IAAED,IAAI,EAAES,2BAA2B;IAAE,GAAGP;EAAK,CAAC;AACvD,CAAC;AAAC,GA9BWN,gCAAgC;EAAA,QAMzCD,iCAAiC;AAAA"},"metadata":{},"sourceType":"module"}
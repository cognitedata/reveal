---
id: timelinetool
title: Timeline tool
describe: Applying styles to nodes based on date with Play & Stop
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

Reveal allows for applying styles to nodes based on date property and can be viewed as a playable entity
where node styles are applied to different nodes which can be used to showcase progress of the model construction.


:::note
The test data used in the documentation site is for testing and to show the capabilities of the tool.
The examples shown is therefore might not be a ideal model construction progression.
:::

<DemoWrapper name="Cognite3DViewerDemo" />

## Timeline

The timeline tool provides ability to apply styles by date. It works by creating a set of "keyframes"  for provided dates.
Each keyframe has a set of associated styled node collections.

### Creating keyframes
To create Keyframe, use `createKeyframe(date: Date)`
- `date` - Date reference for the Keyframe. Should provide the date value by `Date.now()`/`new Date('2021-10-05')`.

### Add Node collection & Styles to Keyframes
Tool provides feature to add nodes & styles to a Keyframe or number of Keyframes or to all of the Keyframes.

#### Set Styles for Node through Keyframes
`assignStyledNodeCollection(keyframes: Keyframe | Keyframe[], nodeCollection: NodeCollectionBase, nodeAppearance: NodeAppearance)`
- `keyframes` - List of Keyframe to apply Style.
- `nodeCollection` - Set of nodes to be rendered for the Keyframe.
- `nodeAppearance` - Styling of the nodes.

### Play timelines
We use `play(startDate: Date, endDate: Date, durationInMilliSeconds: number)`
- `startDate` - Keyframe date to start the Playback of Timeline Keyframes.
- `endDate` - Keyframe date to stop the Playback of Timeline Keyframes.
- `durationInMilliSeconds` - Number of milli-seconds for the full plackback of Keyframes.

```js runnable
// import { NodeCollectionBase, DefaultNodeAppearance, PropertyFilterNodeCollection } from '@cognite/reveal';
// import { TimelineTool, Keyframe } from '@cognite/reveal/tools';

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);

const timeline = new TimelineTool(model);

const nodes = new AssetNodeCollection(sdk, model);
const keyframeAssetNode = timeline.createKeyframe(new Date('2021-10-05'));
keyframeAssetNode.assignStyledNodeCollection(nodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan });

nodes.executeFilter({ assetId: 4222791488928479 });
const keyframeAssetID = timeline.createKeyframe(new Date('2021-10-06'));
keyframeAssetID.assignStyledNodeCollection(nodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Orange });

const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({'PDMS': {'Type': 'PIPE'}});
const keyframeAllPipes = timeline.createKeyframe(new Date('2021-10-07'));
keyframeAllPipes.assignStyledNodeCollection(allPipes, { renderGhosted: false, color: [40, 200, 20] });

const stuMechNodes = new PropertyFilterNodeCollection(sdk, model);
stuMechNodes.executeFilter({'PDMS': {':capDisc': 'MECH', 'Purpose': 'STU' }});
const keyframeMechNodes = timeline.createKeyframe(new Date('2021-10-08'));
keyframeMechNodes.assignStyledNodeCollection(stuMechNodes, { renderGhosted: false, color: [80, 100, 120] });

timeline.play(new Date('2021-10-05'), new Date('2021-10-09'), 25000);
```

### Stop timeline playback

```js runnable
timeline.stop();
```

### Pause timeline

```js runnable
timeline.pause();
```

### Resume timeline

```js runnable
timeline.resume();
```

### Get Keyframe by Date
`getKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs retrived.

```jsx
const keyframe = timeline.getKeyframeByDate(new Date('2021-10-06'));
```

### Remove Styles & Node in Keyframes
`unassignStyledNodeCollection(nodeCollection: NodeCollectionBase, nodeAppearance: NodeAppearance)`
- `nodeCollection` - Node set to be removed from keyframes.
- `nodeAppearance` - Styles to be removed from keyframes.

```js runnable
const keyframe = timeline.getKeyframeByDate(new Date('2021-10-06'));

keyframe.unassignStyledNodeCollection(nodes, { renderGhosted: false, color: [150, 200, 120] })
```

### Timeline Data's while in Play
While in Play state, the tool emits few data which will be helpful for the users to calculate the progression of the Playback of Timeline.
Tool provides `TimelineDateUpdateDelegate` event which can be subscribed to received below data.
- `date` - Virtual Date which can be used to plot progression.
- `activeKeyframe` - Current Keyframe in the Playback.
- `startDate` - Keyframe date to start the Playback of Timeline Keyframes.
- `endDate` - Keyframe date to stop the Playback of Timeline Keyframes.

```jsx
// import { TimelineDateUpdateDelegate } from '@cognite/reveal/tools';

timeline.subscribe('dateChanged', (date, activeKeyframe, startDate, endDate) => {});
```

To unsubscribe from `TimelineDateUpdateDelegate` event

```jsx
timeline.unsubscribe('dateChanged', (date, activeKeyframe, startDate, endDate) => {});
```

### Removing Keyframe
#### By Date
To remove any Keyframe, use `removeKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs to be removed from the Timeline.

```js runnable
timeline.removeKeyframeByDate(new Date('2021-10-07'));
```
#### By Keyframe
To remove any Keyframe, use `removeKeyframe(keyframe: Keyframe)`
- `date` - Keyframe to be removed from the Timeline.

```js runnable
timeline.removeKeyframe(keyframeMechNodes);
```



### Keyframes in Timeline
Gets all Keyframes in the Timeline

```jsx
const allKeyframes = timeline.getAllKeyframes();
```

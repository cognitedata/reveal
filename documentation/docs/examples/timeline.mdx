---
id: timelinetool
title: Timeline Tool
describe: Applying styles to nodes based on date with Play & Stop
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

Reveal allows for applying styles to nodes based on date property and can be viewed as a playable entity
where node styles are applied to different nodes which can be used to showcase progress of the model construction.


:::note
The test data used in the documentation site is for testing and to show the capabilities of the tool.
The examples shown is therefore might not be a ideal model construction progression.
:::

<DemoWrapper name="Cognite3DViewerDemo" />

## Timeline

The timeline tool provides ability to apply styles by date. It works by creating a set of "keyframes"  for provided dates.
Each keyframe has a set of associated styled node collections.

### Creating Keyframes
To create Keyframes, use `createKeyframe(date: Date, nodeCollection: NodeCollectionBase, nodeAppearance: NodeAppearance)`
- `date` - Date reference for the TimelineFrame. Should provide the date value by Date.now() or number of milliseconds elapsed since January 1, 1970.
- `nodeCollection` - Set of nodes to be rendered for the Keyframe.
- `nodeAppearance` - Styling of the nodes.

### Play timelines
We use `play(startDate: Date, endDate: Date, durationInMilliSeconds: number)`
- `startDate` - TimelineFrame date to start the Playback of TimelineFrames.
- `endDate` - TimelineFrame date to stop the Playback of TimelineFrames.
- `durationInMilliSeconds` - Number of milli-seconds after which next TimelineFrame is rendered.

```js runnable
// import { NodeCollectionBase, DefaultNodeAppearance, PropertyFilterNodeCollection } from '@cognite/reveal';
// import { TimelineTool } from '@cognite/reveal/tools';

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);

const timeline = new TimelineTool(model);

const nodes = new AssetNodeCollection(sdk, model);
timeline.createKeyframe(new Date('2021-10-05'), nodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan });

nodes.executeFilter({ assetId: 4222791488928479 });
timeline.createKeyframe(new Date('2021-10-06'), nodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Orange });

const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({'PDMS': {'Type': 'PIPE'}});
timeline.createKeyframe(new Date('2021-10-07'), allPipes, { renderGhosted: false, color: [40, 200, 20] });

const stuMechNodes = new PropertyFilterNodeCollection(sdk, model);
stuMechNodes.executeFilter({'PDMS': {':capDisc': 'MECH', 'Purpose': 'STU' }});
timeline.createKeyframe(new Date('2021-10-08'), stuMechNodes, { renderGhosted: false, color: [80, 100, 120] });

timeline.play(new Date('2021-10-05'), new Date('2021-10-09'), 25000);

```

### Removing Keyframes
To remove any Keyframes, use `removeKeyframe(date: Date)`
- `date` - Keyframes date to be removed from the Timeline in milliseconds.

```js runnable
timeline.removeKeyframe(new Date('2021-10-07'));
```

### Stop timeline playback

```js runnable
timeline.stopPlayback();
```

### Dates in keyframes
We can get all the dates added into the TimelineFrame

```js runnable
const allDates = timeline.getAllDateInTimelineKeyframes();
```

### Keyframes in Timeline
Gets all Keyframes in the Timeline

```js runnable
const allKeyframes = timeline.getAllKeyframes();
```

### Add & Remove Node set & Styles to Keyframes
Tool provides feature to add additional nodes & styles to a Keyframe or number of Keyframes or to all of the Keyframes.

#### Set additional Styles for Node through Keyframes
`assignStyledNodeCollection(keyframes: Keyframe | Keyframe[], nodeCollection: NodeCollectionBase, nodeAppearance: NodeAppearance)`
- `keyframes` - List of Keyframe to apply Style.
- `nodeCollection` - Set of nodes to be rendered for the Keyframe.
- `nodeAppearance` - Styling of the nodes.

```js runnable
const allkeyframes = timeline.getAllkeyframes();

timeline.assignStyledNodeCollection(allkeyframes, allPipes, { renderGhosted: false, color: [150, 200, 120] });
```

#### Remove Styles & Node in Keyframes
`unassignStyledNodeCollection(keyframes: Keyframe | Keyframe[], nodeCollection: NodeCollectionBase, nodeAppearance: NodeAppearance)`
- `keyframes` - List of Keyframes where node set & styles to be removed
- `nodeCollection` - Node set to be removed from keyframes.
- `nodeAppearance` - Styles to be removed from keyframes.

```js runnable
const allkeyframes = timeline.getAllkeyframes();

timeline.unassignStyledNodeCollection(allkeyframes, allPipes, { renderGhosted: false, color: [150, 200, 120] });
```

### Reset Styles
Restores the Style of the model to default style

```js runnable
timeline.resetStyles();
```

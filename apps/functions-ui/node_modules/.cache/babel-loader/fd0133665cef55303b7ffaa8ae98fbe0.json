{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery } from '@tanstack/react-query';\nimport { useSDK } from '@cognite/sdk-provider';\nimport { queryKeys } from '../../../queryKeys';\nexport const useAnnotationsMultiple = pagedFileReferences => {\n  _s();\n  const sdk = useSDK();\n  return useQuery(queryKeys.annotationsPagedFileReferences(pagedFileReferences), () => Promise.all(pagedFileReferences.map(async pagedFileReference => (await sdk.annotations.list({\n    filter: {\n      annotatedResourceType: 'file',\n      annotatedResourceIds: [{\n        id: pagedFileReference.id\n      }]\n    },\n    limit: 1000\n  }).autoPagingToArray({\n    limit: Infinity\n  })).filter(annotation => {\n    // @ts-expect-error\n    const annotationPageNumber = annotation.data.pageNumber;\n    if (pagedFileReference.page === 1) {\n      return annotationPageNumber === 1 || annotationPageNumber === undefined;\n    }\n    return pagedFileReference.page === annotationPageNumber;\n  }))));\n};\n_s(useAnnotationsMultiple, \"PmNYcoJFBmvG9WfZuMOcBXEzd1A=\", false, function () {\n  return [useSDK, useQuery];\n});","map":{"version":3,"names":["useQuery","useSDK","queryKeys","useAnnotationsMultiple","pagedFileReferences","sdk","annotationsPagedFileReferences","Promise","all","map","pagedFileReference","annotations","list","filter","annotatedResourceType","annotatedResourceIds","id","limit","autoPagingToArray","Infinity","annotation","annotationPageNumber","data","pageNumber","page","undefined"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/annotations/service/queries/useAnnotationsMultiple.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\n\nimport { AnnotationModel } from '@cognite/sdk';\nimport { useSDK } from '@cognite/sdk-provider';\n\nimport { queryKeys } from '../../../queryKeys';\n\ntype PagedFileReference = {\n  id: number;\n  page: number | undefined;\n};\n\nexport const useAnnotationsMultiple = (\n  pagedFileReferences: PagedFileReference[]\n) => {\n  const sdk = useSDK();\n\n  return useQuery(\n    queryKeys.annotationsPagedFileReferences(pagedFileReferences),\n    (): Promise<AnnotationModel[][]> =>\n      Promise.all(\n        pagedFileReferences.map(async (pagedFileReference) =>\n          (\n            await sdk.annotations\n              .list({\n                filter: {\n                  annotatedResourceType: 'file',\n                  annotatedResourceIds: [{ id: pagedFileReference.id }],\n                },\n                limit: 1000,\n              })\n              .autoPagingToArray({\n                limit: Infinity,\n              })\n          ).filter((annotation) => {\n            // @ts-expect-error\n            const annotationPageNumber = annotation.data.pageNumber;\n            if (pagedFileReference.page === 1) {\n              return (\n                annotationPageNumber === 1 || annotationPageNumber === undefined\n              );\n            }\n\n            return pagedFileReference.page === annotationPageNumber;\n          })\n        )\n      )\n  );\n};\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,uBAAuB;AAGhD,SAASC,MAAM,QAAQ,uBAAuB;AAE9C,SAASC,SAAS,QAAQ,oBAAoB;AAO9C,OAAO,MAAMC,sBAAsB,GACjCC,mBAAyC,IACtC;EAAA;EACH,MAAMC,GAAG,GAAGJ,MAAM,EAAE;EAEpB,OAAOD,QAAQ,CACbE,SAAS,CAACI,8BAA8B,CAACF,mBAAmB,CAAC,EAC7D,MACEG,OAAO,CAACC,GAAG,CACTJ,mBAAmB,CAACK,GAAG,CAAC,MAAOC,kBAAkB,IAC/C,CACE,MAAML,GAAG,CAACM,WAAW,CAClBC,IAAI,CAAC;IACJC,MAAM,EAAE;MACNC,qBAAqB,EAAE,MAAM;MAC7BC,oBAAoB,EAAE,CAAC;QAAEC,EAAE,EAAEN,kBAAkB,CAACM;MAAG,CAAC;IACtD,CAAC;IACDC,KAAK,EAAE;EACT,CAAC,CAAC,CACDC,iBAAiB,CAAC;IACjBD,KAAK,EAAEE;EACT,CAAC,CAAC,EACJN,MAAM,CAAEO,UAAU,IAAK;IACvB;IACA,MAAMC,oBAAoB,GAAGD,UAAU,CAACE,IAAI,CAACC,UAAU;IACvD,IAAIb,kBAAkB,CAACc,IAAI,KAAK,CAAC,EAAE;MACjC,OACEH,oBAAoB,KAAK,CAAC,IAAIA,oBAAoB,KAAKI,SAAS;IAEpE;IAEA,OAAOf,kBAAkB,CAACc,IAAI,KAAKH,oBAAoB;EACzD,CAAC,CAAC,CACH,CACF,CACJ;AACH,CAAC;AAAC,GApCWlB,sBAAsB;EAAA,QAGrBF,MAAM,EAEXD,QAAQ;AAAA"},"metadata":{},"sourceType":"module"}
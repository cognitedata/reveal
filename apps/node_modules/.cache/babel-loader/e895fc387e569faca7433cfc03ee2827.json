{"ast":null,"code":"var _jsxFileName = \"/Volumes/csvol/fusion/libs/shared/plotting-components/src/TimeseriesChart/components/DateRangePicker/DatePicker/Common.tsx\";\n/* eslint-disable @typescript-eslint/no-shadow */\nimport React from 'react';\nimport ReactDatePicker from 'react-datepicker';\n\n/* eslint-disable no-nested-ternary */\nimport dayjs from 'dayjs';\nimport range from 'lodash/range';\nimport { Button } from '@cognite/cogs.js';\nimport { DatePickerButtonWrapper, MonthSelect, MonthWrapper, OptionStyle, SpacedRowHeader, YearSelect, YearWrapper } from './elements';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const determinePivotRange = (startDate, endDate) => {\n  const startDay = dayjs(startDate);\n  const endDay = dayjs(endDate);\n  let amount = 0;\n  let unit = 'year';\n  const units = ['year', 'month', 'week', 'day', 'hour', 'minute'];\n  units.some(item => {\n    amount = endDay.diff(startDay, item);\n    unit = item;\n    if (amount !== 0) {\n      return true;\n    }\n    return false;\n  });\n  return {\n    type: 'Pivot',\n    date: endDate,\n    direction: 'before',\n    amount,\n    unit\n  };\n};\nexport const getPivotRangeAsDates = ({\n  date,\n  direction,\n  amount,\n  unit\n}) => {\n  const amountInNumber = Number(amount);\n  switch (direction) {\n    case 'before':\n      {\n        return [dayjs(date).subtract(amountInNumber, unit).toDate(), date];\n      }\n    case 'after':\n      {\n        return [date, dayjs(date).add(amountInNumber, unit).toDate()];\n      }\n  }\n  return [dayjs(date).subtract(amountInNumber, unit).toDate(), dayjs(date).add(amountInNumber, unit).toDate()];\n};\nexport const DatePickerInput = ({\n  date,\n  onDateChange,\n  ...props\n}) => /*#__PURE__*/_jsxDEV(DatePickerButtonWrapper, {\n  icon: \"Calendar\",\n  type: \"tertiary\",\n  ...props,\n  children: /*#__PURE__*/_jsxDEV(ReactDatePicker, {\n    open: false,\n    dateFormat: \"yyyy-MM-dd HH:mm\",\n    onChange: value => onDateChange(value),\n    selected: date,\n    showTimeInput: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 105,\n  columnNumber: 3\n}, this);\n_c = DatePickerInput;\nconst years = range(dayjs(0).get('year'), dayjs().get('year') + 1, 1).reverse();\nconst months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nexport const renderCustomHeader = (isYearDisabled = () => false, isMonthDisabled = () => false) => ({\n  date,\n  changeYear,\n  changeMonth,\n  decreaseMonth,\n  increaseMonth,\n  prevMonthButtonDisabled,\n  nextMonthButtonDisabled\n}) => {\n  const year = dayjs(date).get('year');\n  const month = dayjs(date).get('month');\n  return /*#__PURE__*/_jsxDEV(SpacedRowHeader, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"ghost\",\n      size: \"small\",\n      onClick: decreaseMonth,\n      disabled: prevMonthButtonDisabled,\n      icon: \"ArrowLeft\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(YearWrapper, {\n      children: /*#__PURE__*/_jsxDEV(YearSelect, {\n        onChange: value => {\n          changeYear(years[value.target.selectedIndex]);\n        },\n        value: year,\n        className: \"cogs-select__control\",\n        children: years.map(year => /*#__PURE__*/_jsxDEV(OptionStyle, {\n          value: year,\n          disabled: isYearDisabled(year),\n          children: year\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MonthWrapper, {\n      children: /*#__PURE__*/_jsxDEV(MonthSelect, {\n        onChange: value => {\n          changeMonth(value.target.selectedIndex);\n        },\n        value: months[month],\n        className: \"cogs-select__control\",\n        children: months.map((month, index) => /*#__PURE__*/_jsxDEV(OptionStyle, {\n          value: month,\n          disabled: isMonthDisabled(year, index),\n          children: month\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"ghost\",\n      size: \"small\",\n      onClick: increaseMonth,\n      disabled: nextMonthButtonDisabled,\n      icon: \"ArrowRight\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 7\n  }, this);\n};\nvar _c;\n$RefreshReg$(_c, \"DatePickerInput\");","map":{"version":3,"names":["React","ReactDatePicker","dayjs","range","Button","DatePickerButtonWrapper","MonthSelect","MonthWrapper","OptionStyle","SpacedRowHeader","YearSelect","YearWrapper","determinePivotRange","startDate","endDate","startDay","endDay","amount","unit","units","some","item","diff","type","date","direction","getPivotRangeAsDates","amountInNumber","Number","subtract","toDate","add","DatePickerInput","onDateChange","props","value","years","get","reverse","months","renderCustomHeader","isYearDisabled","isMonthDisabled","changeYear","changeMonth","decreaseMonth","increaseMonth","prevMonthButtonDisabled","nextMonthButtonDisabled","year","month","target","selectedIndex","map","index"],"sources":["/Volumes/csvol/fusion/libs/shared/plotting-components/src/TimeseriesChart/components/DateRangePicker/DatePicker/Common.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-shadow */\nimport React from 'react';\nimport ReactDatePicker, { ReactDatePickerProps } from 'react-datepicker';\n\n/* eslint-disable no-nested-ternary */\nimport dayjs from 'dayjs';\nimport range from 'lodash/range';\n\nimport { Button, ButtonProps } from '@cognite/cogs.js';\n\nimport {\n  DatePickerButtonWrapper,\n  MonthSelect,\n  MonthWrapper,\n  OptionStyle,\n  SpacedRowHeader,\n  YearSelect,\n  YearWrapper,\n} from './elements';\n\nexport type StartEndRange = {\n  type: 'StartEnd';\n  startDate: Date;\n  endDate: Date;\n};\nexport type PivotRange = {\n  type: 'Pivot';\n  date: Date;\n  direction: 'before' | 'after' | 'both';\n  amount: number | string;\n  unit: 'minute' | 'hour' | 'day' | 'week' | 'month' | 'year';\n};\n\nexport type DatePickerRange = StartEndRange | PivotRange;\n\nexport const determinePivotRange = (\n  startDate: Date,\n  endDate: Date\n): PivotRange => {\n  const startDay = dayjs(startDate);\n  const endDay = dayjs(endDate);\n\n  let amount = 0;\n  let unit: PivotRange['unit'] = 'year';\n  const units: PivotRange['unit'][] = [\n    'year',\n    'month',\n    'week',\n    'day',\n    'hour',\n    'minute',\n  ];\n  units.some((item) => {\n    amount = endDay.diff(startDay, item);\n    unit = item;\n    if (amount !== 0) {\n      return true;\n    }\n    return false;\n  });\n\n  return {\n    type: 'Pivot',\n    date: endDate,\n    direction: 'before',\n    amount,\n    unit,\n  };\n};\n\nexport const getPivotRangeAsDates = ({\n  date,\n  direction,\n  amount,\n  unit,\n}: PivotRange): [Date, Date] => {\n  const amountInNumber = Number(amount);\n  switch (direction) {\n    case 'before': {\n      return [dayjs(date).subtract(amountInNumber, unit).toDate(), date];\n    }\n    case 'after': {\n      return [date, dayjs(date).add(amountInNumber, unit).toDate()];\n    }\n  }\n  return [\n    dayjs(date).subtract(amountInNumber, unit).toDate(),\n    dayjs(date).add(amountInNumber, unit).toDate(),\n  ];\n};\n\nexport interface DatePickerInputProps\n  extends Omit<ButtonProps, 'ref' | 'alignVertically'> {\n  date: Date;\n  onDateChange: (_date: Date) => void;\n}\nexport const DatePickerInput = ({\n  date,\n  onDateChange,\n  ...props\n}: {\n  date: Date;\n  onDateChange: (_date: Date) => void;\n} & Omit<ButtonProps, 'ref' | 'alignVertically'>) => (\n  <DatePickerButtonWrapper icon=\"Calendar\" type=\"tertiary\" {...props}>\n    <ReactDatePicker\n      open={false}\n      dateFormat=\"yyyy-MM-dd HH:mm\"\n      onChange={(value) => onDateChange(value as Date)}\n      selected={date}\n      showTimeInput\n    />\n  </DatePickerButtonWrapper>\n);\n\nconst years = range(dayjs(0).get('year'), dayjs().get('year') + 1, 1).reverse();\nconst months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n];\n\nexport const renderCustomHeader = (\n  isYearDisabled: (currYear: number) => boolean = () => false,\n  isMonthDisabled: (currYear: number, currentMonth: number) => boolean = () =>\n    false\n): ReactDatePickerProps['renderCustomHeader'] =>\n  (({\n    date,\n    changeYear,\n    changeMonth,\n    decreaseMonth,\n    increaseMonth,\n    prevMonthButtonDisabled,\n    nextMonthButtonDisabled,\n  }) => {\n    const year = dayjs(date).get('year');\n    const month = dayjs(date).get('month');\n    return (\n      <SpacedRowHeader>\n        <Button\n          type=\"ghost\"\n          size=\"small\"\n          onClick={decreaseMonth}\n          disabled={prevMonthButtonDisabled}\n          icon=\"ArrowLeft\"\n        />\n        <YearWrapper>\n          <YearSelect\n            onChange={(value) => {\n              changeYear(years[value.target.selectedIndex]);\n            }}\n            value={year}\n            className=\"cogs-select__control\"\n          >\n            {years.map((year) => (\n              <OptionStyle value={year} disabled={isYearDisabled(year)}>\n                {year}\n              </OptionStyle>\n            ))}\n          </YearSelect>\n        </YearWrapper>\n        <MonthWrapper>\n          <MonthSelect\n            onChange={(value) => {\n              changeMonth(value.target.selectedIndex);\n            }}\n            value={months[month]}\n            className=\"cogs-select__control\"\n          >\n            {months.map((month, index) => (\n              <OptionStyle\n                value={month}\n                disabled={isMonthDisabled(year, index)}\n              >\n                {month}\n              </OptionStyle>\n            ))}\n          </MonthSelect>\n        </MonthWrapper>\n        <Button\n          type=\"ghost\"\n          size=\"small\"\n          onClick={increaseMonth}\n          disabled={nextMonthButtonDisabled}\n          icon=\"ArrowRight\"\n        />\n      </SpacedRowHeader>\n    );\n  }) as ReactDatePickerProps['renderCustomHeader'];\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,eAAe,MAAgC,kBAAkB;;AAExE;AACA,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,cAAc;AAEhC,SAASC,MAAM,QAAqB,kBAAkB;AAEtD,SACEC,uBAAuB,EACvBC,WAAW,EACXC,YAAY,EACZC,WAAW,EACXC,eAAe,EACfC,UAAU,EACVC,WAAW,QACN,YAAY;AAAC;AAiBpB,OAAO,MAAMC,mBAAmB,GAAG,CACjCC,SAAe,EACfC,OAAa,KACE;EACf,MAAMC,QAAQ,GAAGb,KAAK,CAACW,SAAS,CAAC;EACjC,MAAMG,MAAM,GAAGd,KAAK,CAACY,OAAO,CAAC;EAE7B,IAAIG,MAAM,GAAG,CAAC;EACd,IAAIC,IAAwB,GAAG,MAAM;EACrC,MAAMC,KAA2B,GAAG,CAClC,MAAM,EACN,OAAO,EACP,MAAM,EACN,KAAK,EACL,MAAM,EACN,QAAQ,CACT;EACDA,KAAK,CAACC,IAAI,CAAEC,IAAI,IAAK;IACnBJ,MAAM,GAAGD,MAAM,CAACM,IAAI,CAACP,QAAQ,EAAEM,IAAI,CAAC;IACpCH,IAAI,GAAGG,IAAI;IACX,IAAIJ,MAAM,KAAK,CAAC,EAAE;MAChB,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC,CAAC;EAEF,OAAO;IACLM,IAAI,EAAE,OAAO;IACbC,IAAI,EAAEV,OAAO;IACbW,SAAS,EAAE,QAAQ;IACnBR,MAAM;IACNC;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMQ,oBAAoB,GAAG,CAAC;EACnCF,IAAI;EACJC,SAAS;EACTR,MAAM;EACNC;AACU,CAAC,KAAmB;EAC9B,MAAMS,cAAc,GAAGC,MAAM,CAACX,MAAM,CAAC;EACrC,QAAQQ,SAAS;IACf,KAAK,QAAQ;MAAE;QACb,OAAO,CAACvB,KAAK,CAACsB,IAAI,CAAC,CAACK,QAAQ,CAACF,cAAc,EAAET,IAAI,CAAC,CAACY,MAAM,EAAE,EAAEN,IAAI,CAAC;MACpE;IACA,KAAK,OAAO;MAAE;QACZ,OAAO,CAACA,IAAI,EAAEtB,KAAK,CAACsB,IAAI,CAAC,CAACO,GAAG,CAACJ,cAAc,EAAET,IAAI,CAAC,CAACY,MAAM,EAAE,CAAC;MAC/D;EAAC;EAEH,OAAO,CACL5B,KAAK,CAACsB,IAAI,CAAC,CAACK,QAAQ,CAACF,cAAc,EAAET,IAAI,CAAC,CAACY,MAAM,EAAE,EACnD5B,KAAK,CAACsB,IAAI,CAAC,CAACO,GAAG,CAACJ,cAAc,EAAET,IAAI,CAAC,CAACY,MAAM,EAAE,CAC/C;AACH,CAAC;AAOD,OAAO,MAAME,eAAe,GAAG,CAAC;EAC9BR,IAAI;EACJS,YAAY;EACZ,GAAGC;AAI0C,CAAC,kBAC9C,QAAC,uBAAuB;EAAC,IAAI,EAAC,UAAU;EAAC,IAAI,EAAC,UAAU;EAAA,GAAKA,KAAK;EAAA,uBAChE,QAAC,eAAe;IACd,IAAI,EAAE,KAAM;IACZ,UAAU,EAAC,kBAAkB;IAC7B,QAAQ,EAAGC,KAAK,IAAKF,YAAY,CAACE,KAAK,CAAU;IACjD,QAAQ,EAAEX,IAAK;IACf,aAAa;EAAA;IAAA;IAAA;IAAA;EAAA;AACb;EAAA;EAAA;EAAA;AAAA,QAEL;AAAC,KAjBWQ,eAAe;AAmB5B,MAAMI,KAAK,GAAGjC,KAAK,CAACD,KAAK,CAAC,CAAC,CAAC,CAACmC,GAAG,CAAC,MAAM,CAAC,EAAEnC,KAAK,EAAE,CAACmC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAACC,OAAO,EAAE;AAC/E,MAAMC,MAAM,GAAG,CACb,SAAS,EACT,UAAU,EACV,OAAO,EACP,OAAO,EACP,KAAK,EACL,MAAM,EACN,MAAM,EACN,QAAQ,EACR,WAAW,EACX,SAAS,EACT,UAAU,EACV,UAAU,CACX;AAED,OAAO,MAAMC,kBAAkB,GAAG,CAChCC,cAA6C,GAAG,MAAM,KAAK,EAC3DC,eAAoE,GAAG,MACrE,KAAK,KAEN,CAAC;EACAlB,IAAI;EACJmB,UAAU;EACVC,WAAW;EACXC,aAAa;EACbC,aAAa;EACbC,uBAAuB;EACvBC;AACF,CAAC,KAAK;EACJ,MAAMC,IAAI,GAAG/C,KAAK,CAACsB,IAAI,CAAC,CAACa,GAAG,CAAC,MAAM,CAAC;EACpC,MAAMa,KAAK,GAAGhD,KAAK,CAACsB,IAAI,CAAC,CAACa,GAAG,CAAC,OAAO,CAAC;EACtC,oBACE,QAAC,eAAe;IAAA,wBACd,QAAC,MAAM;MACL,IAAI,EAAC,OAAO;MACZ,IAAI,EAAC,OAAO;MACZ,OAAO,EAAEQ,aAAc;MACvB,QAAQ,EAAEE,uBAAwB;MAClC,IAAI,EAAC;IAAW;MAAA;MAAA;MAAA;IAAA,QAChB,eACF,QAAC,WAAW;MAAA,uBACV,QAAC,UAAU;QACT,QAAQ,EAAGZ,KAAK,IAAK;UACnBQ,UAAU,CAACP,KAAK,CAACD,KAAK,CAACgB,MAAM,CAACC,aAAa,CAAC,CAAC;QAC/C,CAAE;QACF,KAAK,EAAEH,IAAK;QACZ,SAAS,EAAC,sBAAsB;QAAA,UAE/Bb,KAAK,CAACiB,GAAG,CAAEJ,IAAI,iBACd,QAAC,WAAW;UAAC,KAAK,EAAEA,IAAK;UAAC,QAAQ,EAAER,cAAc,CAACQ,IAAI,CAAE;UAAA,UACtDA;QAAI;UAAA;UAAA;UAAA;QAAA,QAER;MAAC;QAAA;QAAA;QAAA;MAAA;IACS;MAAA;MAAA;MAAA;IAAA,QACD,eACd,QAAC,YAAY;MAAA,uBACX,QAAC,WAAW;QACV,QAAQ,EAAGd,KAAK,IAAK;UACnBS,WAAW,CAACT,KAAK,CAACgB,MAAM,CAACC,aAAa,CAAC;QACzC,CAAE;QACF,KAAK,EAAEb,MAAM,CAACW,KAAK,CAAE;QACrB,SAAS,EAAC,sBAAsB;QAAA,UAE/BX,MAAM,CAACc,GAAG,CAAC,CAACH,KAAK,EAAEI,KAAK,kBACvB,QAAC,WAAW;UACV,KAAK,EAAEJ,KAAM;UACb,QAAQ,EAAER,eAAe,CAACO,IAAI,EAAEK,KAAK,CAAE;UAAA,UAEtCJ;QAAK;UAAA;UAAA;UAAA;QAAA,QAET;MAAC;QAAA;QAAA;QAAA;MAAA;IACU;MAAA;MAAA;MAAA;IAAA,QACD,eACf,QAAC,MAAM;MACL,IAAI,EAAC,OAAO;MACZ,IAAI,EAAC,OAAO;MACZ,OAAO,EAAEJ,aAAc;MACvB,QAAQ,EAAEE,uBAAwB;MAClC,IAAI,EAAC;IAAY;MAAA;MAAA;MAAA;IAAA,QACjB;EAAA;IAAA;IAAA;IAAA;EAAA,QACc;AAEtB,CAAgD;AAAC;AAAA"},"metadata":{},"sourceType":"module"}
version: 1
parallel: 32
services:
  - name: 'react-demo-app'
    email: 'frontend-app-server@cognite.com'
    pipelines:
      - name: cdf
        cluster_selection_rules:
          - description: 'react-demo-app cdf deployment pipeline'
            expression: 'cdf:true && (vendor:gke || vendor:aks)'
        manifest_template_command:
          [
            'bash',
            '-c',
            "/scripts/kustomize_vendor_and_cluster_overlays.sh apps/react-demo-app/kustomize/production | sed \"s|\\${account}|${BAKER_CLUSTER}|g\"",
          ]
      - name: cdf-staging
        cluster_selection_rules:
          - description: 'react-demo-app cdf staging deployment pipeline'
            expression: 'cdf:true && (vendor:gke || vendor:aks)'
        manifest_template_command:
          [
            'bash',
            '-c',
            "/scripts/kustomize_vendor_and_cluster_overlays.sh apps/react-demo-app/kustomize/staging | sed \"s|\\${account}|${BAKER_CLUSTER}|g\"",
          ]

{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo } from 'react';\nimport { DEFAULT_GLOBAL_TABLE_RESULT_LIMIT } from '../../../constants';\nimport { useTimeseriesListQuery } from '../../service';\nimport { mapFiltersToTimeseriesAdvancedFilters, mapInternalFilterToTimeseriesFilter, mapTableSortByToTimeseriesSortFields } from '../transformers';\nexport const useTimeseriesSearchResultQuery = ({\n  query,\n  filter,\n  sortBy,\n  limit\n}, searchConfig, options) => {\n  _s();\n  const advancedFilter = useMemo(() => mapFiltersToTimeseriesAdvancedFilters(filter, query, searchConfig), [filter, query, searchConfig]);\n  const timeseriesFilter = useMemo(() => mapInternalFilterToTimeseriesFilter(filter), [filter]);\n  const timeseriesSort = useMemo(() => mapTableSortByToTimeseriesSortFields(sortBy), [sortBy]);\n  return useTimeseriesListQuery({\n    advancedFilter,\n    filter: timeseriesFilter,\n    sort: timeseriesSort,\n    limit: limit || DEFAULT_GLOBAL_TABLE_RESULT_LIMIT\n  }, {\n    ...options,\n    keepPreviousData: true\n  });\n};\n_s(useTimeseriesSearchResultQuery, \"61PlpJOefpK2SvQoqG29CHgoLPo=\", false, function () {\n  return [useTimeseriesListQuery];\n});","map":{"version":3,"names":["useMemo","DEFAULT_GLOBAL_TABLE_RESULT_LIMIT","useTimeseriesListQuery","mapFiltersToTimeseriesAdvancedFilters","mapInternalFilterToTimeseriesFilter","mapTableSortByToTimeseriesSortFields","useTimeseriesSearchResultQuery","query","filter","sortBy","limit","searchConfig","options","advancedFilter","timeseriesFilter","timeseriesSort","sort","keepPreviousData"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/timeseries/internal/queries/useTimeseriesSearchResultQuery.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport { UseInfiniteQueryOptions } from '@tanstack/react-query';\n\nimport {\n  InternalTimeseriesFilters,\n  TimeseriesConfigType,\n} from '@data-exploration-lib/core';\n\nimport { DEFAULT_GLOBAL_TABLE_RESULT_LIMIT } from '../../../constants';\nimport { TableSortBy } from '../../../types';\nimport { useTimeseriesListQuery } from '../../service';\nimport {\n  mapFiltersToTimeseriesAdvancedFilters,\n  mapInternalFilterToTimeseriesFilter,\n  mapTableSortByToTimeseriesSortFields,\n} from '../transformers';\n\nexport const useTimeseriesSearchResultQuery = (\n  {\n    query,\n    filter,\n    sortBy,\n    limit,\n  }: {\n    query?: string;\n    filter: InternalTimeseriesFilters;\n    sortBy?: TableSortBy[];\n    limit?: number;\n  },\n  searchConfig?: TimeseriesConfigType,\n  options?: UseInfiniteQueryOptions\n) => {\n  const advancedFilter = useMemo(\n    () => mapFiltersToTimeseriesAdvancedFilters(filter, query, searchConfig),\n    [filter, query, searchConfig]\n  );\n\n  const timeseriesFilter = useMemo(\n    () => mapInternalFilterToTimeseriesFilter(filter),\n    [filter]\n  );\n\n  const timeseriesSort = useMemo(\n    () => mapTableSortByToTimeseriesSortFields(sortBy),\n    [sortBy]\n  );\n\n  return useTimeseriesListQuery(\n    {\n      advancedFilter,\n      filter: timeseriesFilter,\n      sort: timeseriesSort,\n      limit: limit || DEFAULT_GLOBAL_TABLE_RESULT_LIMIT,\n    },\n    {\n      ...options,\n      keepPreviousData: true,\n    }\n  );\n};\n"],"mappings":";AAAA,SAASA,OAAO,QAAQ,OAAO;AAS/B,SAASC,iCAAiC,QAAQ,oBAAoB;AAEtE,SAASC,sBAAsB,QAAQ,eAAe;AACtD,SACEC,qCAAqC,EACrCC,mCAAmC,EACnCC,oCAAoC,QAC/B,iBAAiB;AAExB,OAAO,MAAMC,8BAA8B,GAAG,CAC5C;EACEC,KAAK;EACLC,MAAM;EACNC,MAAM;EACNC;AAMF,CAAC,EACDC,YAAmC,EACnCC,OAAiC,KAC9B;EAAA;EACH,MAAMC,cAAc,GAAGb,OAAO,CAC5B,MAAMG,qCAAqC,CAACK,MAAM,EAAED,KAAK,EAAEI,YAAY,CAAC,EACxE,CAACH,MAAM,EAAED,KAAK,EAAEI,YAAY,CAAC,CAC9B;EAED,MAAMG,gBAAgB,GAAGd,OAAO,CAC9B,MAAMI,mCAAmC,CAACI,MAAM,CAAC,EACjD,CAACA,MAAM,CAAC,CACT;EAED,MAAMO,cAAc,GAAGf,OAAO,CAC5B,MAAMK,oCAAoC,CAACI,MAAM,CAAC,EAClD,CAACA,MAAM,CAAC,CACT;EAED,OAAOP,sBAAsB,CAC3B;IACEW,cAAc;IACdL,MAAM,EAAEM,gBAAgB;IACxBE,IAAI,EAAED,cAAc;IACpBL,KAAK,EAAEA,KAAK,IAAIT;EAClB,CAAC,EACD;IACE,GAAGW,OAAO;IACVK,gBAAgB,EAAE;EACpB,CAAC,CACF;AACH,CAAC;AAAC,GA1CWX,8BAA8B;EAAA,QA8BlCJ,sBAAsB;AAAA"},"metadata":{},"sourceType":"module"}
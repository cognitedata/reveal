{"ast":null,"code":"var _jsxFileName = \"/Volumes/csvol/fusion/apps/functions-ui/src/components/buttons/DeleteScheduleButton.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useMutation, useQueryCache } from 'react-query';\nimport { Modal, notification } from 'antd';\nimport { deleteSchedule } from 'utils/api';\nimport { Button } from '@cognite/cogs.js';\nimport { allSchedulesKey } from '../../utils/queryKeys';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DeleteScheduleButton({\n  id\n}) {\n  _s();\n  const queryCache = useQueryCache();\n  const [doDelete, {\n    isLoading,\n    isSuccess,\n    isError\n  }] = useMutation(deleteSchedule, {\n    onSuccess() {\n      queryCache.invalidateQueries([allSchedulesKey]);\n    }\n  });\n  useEffect(() => {\n    if (isSuccess) {\n      notification.success({\n        message: 'Success',\n        description: `Schedule ${id} deleted successfully`\n      });\n    }\n  }, [isSuccess, id]);\n  useEffect(() => {\n    if (isError) {\n      notification.error({\n        message: 'Error',\n        description: `An error occured when trying to delete schedule ${id}`,\n        key: 'schedules'\n      });\n    }\n  }, [isError, id]);\n  return /*#__PURE__*/_jsxDEV(Button, {\n    icon: isLoading ? 'Loader' : 'Delete',\n    onClick: e => {\n      e.stopPropagation();\n      Modal.confirm({\n        title: 'Are you sure?',\n        content: 'Are you sure you want to delete this schedule?',\n        onOk: () => {\n          doDelete(id);\n        },\n        onCancel: () => {},\n        okText: 'Delete'\n      });\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(DeleteScheduleButton, \"KTPDc/i0orSdYE6wAgnu094pl58=\", false, function () {\n  return [useQueryCache, useMutation];\n});\n_c = DeleteScheduleButton;\nvar _c;\n$RefreshReg$(_c, \"DeleteScheduleButton\");","map":{"version":3,"names":["React","useEffect","useMutation","useQueryCache","Modal","notification","deleteSchedule","Button","allSchedulesKey","DeleteScheduleButton","id","queryCache","doDelete","isLoading","isSuccess","isError","onSuccess","invalidateQueries","success","message","description","error","key","e","stopPropagation","confirm","title","content","onOk","onCancel","okText"],"sources":["/Volumes/csvol/fusion/apps/functions-ui/src/components/buttons/DeleteScheduleButton.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useMutation, useQueryCache } from 'react-query';\n\nimport { Modal, notification } from 'antd';\nimport { deleteSchedule } from 'utils/api';\n\nimport { Button } from '@cognite/cogs.js';\n\nimport { allSchedulesKey } from '../../utils/queryKeys';\n\ntype Props = {\n  id: number;\n};\n\nexport default function DeleteScheduleButton({ id }: Props) {\n  const queryCache = useQueryCache();\n  const [doDelete, { isLoading, isSuccess, isError }] = useMutation(\n    deleteSchedule,\n    {\n      onSuccess() {\n        queryCache.invalidateQueries([allSchedulesKey]);\n      },\n    }\n  );\n\n  useEffect(() => {\n    if (isSuccess) {\n      notification.success({\n        message: 'Success',\n        description: `Schedule ${id} deleted successfully`,\n      });\n    }\n  }, [isSuccess, id]);\n  useEffect(() => {\n    if (isError) {\n      notification.error({\n        message: 'Error',\n        description: `An error occured when trying to delete schedule ${id}`,\n        key: 'schedules',\n      });\n    }\n  }, [isError, id]);\n\n  return (\n    <Button\n      icon={isLoading ? 'Loader' : 'Delete'}\n      onClick={(e) => {\n        e.stopPropagation();\n        Modal.confirm({\n          title: 'Are you sure?',\n          content: 'Are you sure you want to delete this schedule?',\n          onOk: () => {\n            doDelete(id);\n          },\n          onCancel: () => {},\n          okText: 'Delete',\n        });\n      }}\n    />\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,aAAa,QAAQ,aAAa;AAExD,SAASC,KAAK,EAAEC,YAAY,QAAQ,MAAM;AAC1C,SAASC,cAAc,QAAQ,WAAW;AAE1C,SAASC,MAAM,QAAQ,kBAAkB;AAEzC,SAASC,eAAe,QAAQ,uBAAuB;AAAC;AAMxD,eAAe,SAASC,oBAAoB,CAAC;EAAEC;AAAU,CAAC,EAAE;EAAA;EAC1D,MAAMC,UAAU,GAAGR,aAAa,EAAE;EAClC,MAAM,CAACS,QAAQ,EAAE;IAAEC,SAAS;IAAEC,SAAS;IAAEC;EAAQ,CAAC,CAAC,GAAGb,WAAW,CAC/DI,cAAc,EACd;IACEU,SAAS,GAAG;MACVL,UAAU,CAACM,iBAAiB,CAAC,CAACT,eAAe,CAAC,CAAC;IACjD;EACF,CAAC,CACF;EAEDP,SAAS,CAAC,MAAM;IACd,IAAIa,SAAS,EAAE;MACbT,YAAY,CAACa,OAAO,CAAC;QACnBC,OAAO,EAAE,SAAS;QAClBC,WAAW,EAAG,YAAWV,EAAG;MAC9B,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACI,SAAS,EAAEJ,EAAE,CAAC,CAAC;EACnBT,SAAS,CAAC,MAAM;IACd,IAAIc,OAAO,EAAE;MACXV,YAAY,CAACgB,KAAK,CAAC;QACjBF,OAAO,EAAE,OAAO;QAChBC,WAAW,EAAG,mDAAkDV,EAAG,EAAC;QACpEY,GAAG,EAAE;MACP,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACP,OAAO,EAAEL,EAAE,CAAC,CAAC;EAEjB,oBACE,QAAC,MAAM;IACL,IAAI,EAAEG,SAAS,GAAG,QAAQ,GAAG,QAAS;IACtC,OAAO,EAAGU,CAAC,IAAK;MACdA,CAAC,CAACC,eAAe,EAAE;MACnBpB,KAAK,CAACqB,OAAO,CAAC;QACZC,KAAK,EAAE,eAAe;QACtBC,OAAO,EAAE,gDAAgD;QACzDC,IAAI,EAAE,MAAM;UACVhB,QAAQ,CAACF,EAAE,CAAC;QACd,CAAC;QACDmB,QAAQ,EAAE,MAAM,CAAC,CAAC;QAClBC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ;EAAE;IAAA;IAAA;IAAA;EAAA,QACF;AAEN;AAAC,GA9CuBrB,oBAAoB;EAAA,QACvBN,aAAa,EACsBD,WAAW;AAAA;AAAA,KAF3CO,oBAAoB;AAAA;AAAA"},"metadata":{},"sourceType":"module"}
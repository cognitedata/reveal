# PID CLI

This tool is created to use the files generated by the diagram parser (react-pid), graph documents, to generate the documents used by LineWalk.

The CLI primarily uses typescript to use methods and typings from pid-tools. It is not included in the bazel build, but in stead compiled in memory when the script is run using ts-node.

The scripts used to download and upload to CDF is in Python as the Javascript SDK does not support personal authentication with interactive login, when not used in browser context.

## Get started

run `yarn install` to install typescript dependencies

run `poetry install` to install python dependencies

## Versioning

The output used by LineWalk has versioning, and you should supply a version when running the script (default is 0.0.1). If a previously uploaded version is used, it will overwrite the existing files when uploading to CDF.

## Usage

### Download, Calculate and Upload

run `sh cli.sh -v ${version}` to download graphs documents from CDF, parse to LineWalk format and upload the result to CDF

### Download graph documents from CDF

run `poetry run python download.py` to download all graphs currently uploaded to CDF to the graphs folder

note: This will clear all documents currently in the folder.

### Calculate only

run `yarn calc-lines --output-version ${version}` to parse whatever files is currently in the graphs folger. The output, formatted for use in LineWalk, is stored in the documents folder

### Upload only

run `poetry run python upload.py` to upload the documents you have in the documents folder

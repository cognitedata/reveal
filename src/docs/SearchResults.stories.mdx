import { useState } from 'react';
import { AssetFilterProps } from '@cognite/sdk';
import { action } from '@storybook/addon-actions';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import { DataExplorationProvider } from '../context';
import { DataSetFilter } from '../components/Search/Filters';
import { AssetSearchResults } from '../containers/SearchResults';

<Meta
  title="Search Results/Get Started"
  component={DataExplorationProvider}
  parameters={{
    viewMode: 'docs',
    previewTabs: { canvas: { hidden: true } },
  }}
/>

# Using `Search Result` components

## Use Case 1 - Accomplish "Query Building"

Through using things like `DataSetFilter` and `SourceFilter`, they will directly affect the `<resource>Filter` within the `ResourceSelectionContext`

Then, then any component like the `SearchResultTable` or the `<resource>SearchResult` would already read the filter from the context, and do the search via `React-Query` automatically.

<Canvas>
  <Story name="QueryBuilder">
    {() => {
      const [assetFilter, setAssetFilter] = useState({});
      return (
        <div style={{ height: 400 }}>
          <code>{JSON.stringify(assetFilter, null, 2)}</code>
          <DataSetFilter
            resourceType="asset"
            value={assetFilter.dataSetIds}
            setValue={value =>
              setAssetFilter({ ...assetFilter, dataSetIds: value })
            }
          />
          <AssetSearchResults
            filter={assetFilter}
            isSelected={() => false}
            onSelect={action('onSelect')}
            onClick={action('onClick')}
            selectionMode="single"
          />
        </div>
      );
    }}
  </Story>
</Canvas>

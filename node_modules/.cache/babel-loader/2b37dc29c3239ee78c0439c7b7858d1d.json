{"ast":null,"code":"var _s = $RefreshSig$();\nimport * as React from 'react';\nimport { EMPTY_OBJECT, useDeepMemo } from '@data-exploration-lib/core';\nimport { getSearchConfig } from '../../../utils';\nimport { extractMatchingLabels } from '../../../utils/extractMatchingLabels';\nimport { useSequenceSearchResultQuery } from './useSequenceSearchResultQuery';\nexport const useSequenceSearchResultWithMatchingLabelsQuery = ({\n  query,\n  filter = EMPTY_OBJECT,\n  sortBy\n}, searchConfig = getSearchConfig().sequence, options) => {\n  _s();\n  const {\n    data,\n    ...rest\n  } = useSequenceSearchResultQuery({\n    query,\n    filter,\n    sortBy\n  }, searchConfig, options);\n  const properties = React.useMemo(() => {\n    const arr = [];\n    if (searchConfig.id.enabled) {\n      arr.push({\n        key: 'id',\n        label: 'ID'\n      });\n    }\n    if (searchConfig.description.enabled) {\n      arr.push({\n        key: 'description',\n        useSubstringMatch: true\n      });\n    }\n    if (searchConfig.externalId.enabled) {\n      arr.push({\n        key: 'externalId',\n        label: 'External ID'\n      });\n    }\n    if (searchConfig.name.enabled) {\n      arr.push({\n        key: 'name',\n        useSubstringMatch: true\n      });\n    }\n    if (searchConfig.metadata.enabled) {\n      arr.push('metadata');\n    }\n    return arr;\n  }, [searchConfig]);\n  const mappedData = useDeepMemo(() => {\n    if (data && query) {\n      return data.map(sequence => {\n        return {\n          ...sequence,\n          matchingLabels: extractMatchingLabels(sequence, query, properties)\n        };\n      });\n    }\n    return data;\n  }, [data, query]);\n  return {\n    data: mappedData,\n    ...rest\n  };\n};\n_s(useSequenceSearchResultWithMatchingLabelsQuery, \"TlqnDajVcAt9GYHIGojO+83czSU=\", false, function () {\n  return [useSequenceSearchResultQuery, useDeepMemo];\n});","map":{"version":3,"names":["React","EMPTY_OBJECT","useDeepMemo","getSearchConfig","extractMatchingLabels","useSequenceSearchResultQuery","useSequenceSearchResultWithMatchingLabelsQuery","query","filter","sortBy","searchConfig","sequence","options","data","rest","properties","useMemo","arr","id","enabled","push","key","label","description","useSubstringMatch","externalId","name","metadata","mappedData","map","matchingLabels"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/sequence/internal/queries/useSequenceSearchResultWithMatchingLabelsQuery.ts"],"sourcesContent":["import * as React from 'react';\n\nimport { UseInfiniteQueryOptions } from '@tanstack/react-query';\n\nimport {\n  EMPTY_OBJECT,\n  InternalSequenceFilters,\n  SequenceConfigType,\n  useDeepMemo,\n} from '@data-exploration-lib/core';\n\nimport { TableSortBy } from '../../../types';\nimport { getSearchConfig } from '../../../utils';\nimport {\n  extractMatchingLabels,\n  MatchingLabelPropertyType,\n} from '../../../utils/extractMatchingLabels';\n\nimport { useSequenceSearchResultQuery } from './useSequenceSearchResultQuery';\n\nexport const useSequenceSearchResultWithMatchingLabelsQuery = (\n  {\n    query,\n    filter = EMPTY_OBJECT,\n    sortBy,\n  }: {\n    query?: string;\n    filter: InternalSequenceFilters;\n    sortBy?: TableSortBy[];\n  },\n  searchConfig: SequenceConfigType = getSearchConfig().sequence,\n  options?: UseInfiniteQueryOptions\n) => {\n  const { data, ...rest } = useSequenceSearchResultQuery(\n    { query, filter, sortBy },\n    searchConfig,\n    options\n  );\n\n  const properties = React.useMemo(() => {\n    const arr: MatchingLabelPropertyType[] = [];\n\n    if (searchConfig.id.enabled) {\n      arr.push({\n        key: 'id',\n        label: 'ID',\n      });\n    }\n\n    if (searchConfig.description.enabled) {\n      arr.push({\n        key: 'description',\n        useSubstringMatch: true,\n      });\n    }\n\n    if (searchConfig.externalId.enabled) {\n      arr.push({\n        key: 'externalId',\n        label: 'External ID',\n      });\n    }\n\n    if (searchConfig.name.enabled) {\n      arr.push({\n        key: 'name',\n        useSubstringMatch: true,\n      });\n    }\n    if (searchConfig.metadata.enabled) {\n      arr.push('metadata');\n    }\n\n    return arr;\n  }, [searchConfig]);\n\n  const mappedData = useDeepMemo(() => {\n    if (data && query) {\n      return data.map((sequence) => {\n        return {\n          ...sequence,\n          matchingLabels: extractMatchingLabels(sequence, query, properties),\n        };\n      });\n    }\n\n    return data;\n  }, [data, query]);\n\n  return { data: mappedData, ...rest };\n};\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAI9B,SACEC,YAAY,EAGZC,WAAW,QACN,4BAA4B;AAGnC,SAASC,eAAe,QAAQ,gBAAgB;AAChD,SACEC,qBAAqB,QAEhB,sCAAsC;AAE7C,SAASC,4BAA4B,QAAQ,gCAAgC;AAE7E,OAAO,MAAMC,8CAA8C,GAAG,CAC5D;EACEC,KAAK;EACLC,MAAM,GAAGP,YAAY;EACrBQ;AAKF,CAAC,EACDC,YAAgC,GAAGP,eAAe,EAAE,CAACQ,QAAQ,EAC7DC,OAAiC,KAC9B;EAAA;EACH,MAAM;IAAEC,IAAI;IAAE,GAAGC;EAAK,CAAC,GAAGT,4BAA4B,CACpD;IAAEE,KAAK;IAAEC,MAAM;IAAEC;EAAO,CAAC,EACzBC,YAAY,EACZE,OAAO,CACR;EAED,MAAMG,UAAU,GAAGf,KAAK,CAACgB,OAAO,CAAC,MAAM;IACrC,MAAMC,GAAgC,GAAG,EAAE;IAE3C,IAAIP,YAAY,CAACQ,EAAE,CAACC,OAAO,EAAE;MAC3BF,GAAG,CAACG,IAAI,CAAC;QACPC,GAAG,EAAE,IAAI;QACTC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ;IAEA,IAAIZ,YAAY,CAACa,WAAW,CAACJ,OAAO,EAAE;MACpCF,GAAG,CAACG,IAAI,CAAC;QACPC,GAAG,EAAE,aAAa;QAClBG,iBAAiB,EAAE;MACrB,CAAC,CAAC;IACJ;IAEA,IAAId,YAAY,CAACe,UAAU,CAACN,OAAO,EAAE;MACnCF,GAAG,CAACG,IAAI,CAAC;QACPC,GAAG,EAAE,YAAY;QACjBC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ;IAEA,IAAIZ,YAAY,CAACgB,IAAI,CAACP,OAAO,EAAE;MAC7BF,GAAG,CAACG,IAAI,CAAC;QACPC,GAAG,EAAE,MAAM;QACXG,iBAAiB,EAAE;MACrB,CAAC,CAAC;IACJ;IACA,IAAId,YAAY,CAACiB,QAAQ,CAACR,OAAO,EAAE;MACjCF,GAAG,CAACG,IAAI,CAAC,UAAU,CAAC;IACtB;IAEA,OAAOH,GAAG;EACZ,CAAC,EAAE,CAACP,YAAY,CAAC,CAAC;EAElB,MAAMkB,UAAU,GAAG1B,WAAW,CAAC,MAAM;IACnC,IAAIW,IAAI,IAAIN,KAAK,EAAE;MACjB,OAAOM,IAAI,CAACgB,GAAG,CAAElB,QAAQ,IAAK;QAC5B,OAAO;UACL,GAAGA,QAAQ;UACXmB,cAAc,EAAE1B,qBAAqB,CAACO,QAAQ,EAAEJ,KAAK,EAAEQ,UAAU;QACnE,CAAC;MACH,CAAC,CAAC;IACJ;IAEA,OAAOF,IAAI;EACb,CAAC,EAAE,CAACA,IAAI,EAAEN,KAAK,CAAC,CAAC;EAEjB,OAAO;IAAEM,IAAI,EAAEe,UAAU;IAAE,GAAGd;EAAK,CAAC;AACtC,CAAC;AAAC,GAtEWR,8CAA8C;EAAA,QAa/BD,4BAA4B,EA2CnCH,WAAW;AAAA"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Volumes/csvol/fusion/libs/shared/plotting-components/src/TimeseriesChart/components/DateRangePicker/DatePicker/DatePicker.tsx\",\n  _s = $RefreshSig$();\n/* eslint-disable no-nested-ternary */\nimport { useState, useRef, useMemo } from 'react';\nimport ReactDatePicker from 'react-datepicker';\nimport dayjs from 'dayjs';\nimport noop from 'lodash/noop';\nimport { Dropdown, Button } from '@cognite/cogs.js';\nimport { DatePickerInput, renderCustomHeader } from './Common';\nimport { DatePickerWrapper } from './elements';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DatePicker = ({\n  initialDate = new Date(),\n  onDateChanged = noop\n}) => {\n  _s();\n  // Cogs is stupid af so we have to ref the span\n  const spanRef = useRef(null);\n  const {\n    offsetTop,\n    offsetHeight\n  } = spanRef?.current || {\n    offsetTop: 0,\n    offsetHeight: 0\n  };\n  const maxHeight = useMemo(() => Math.max(window.innerHeight - offsetTop - offsetHeight - 100, 400), [offsetTop, offsetHeight]);\n  const [date, setDate] = useState(initialDate);\n  const renderModePicker = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      boxShadow: '0 0 16px lightgrey',\n      padding: 16,\n      background: '#fff',\n      maxHeight,\n      overflow: 'auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(DatePickerInput, {\n      date: date,\n      onDateChange: newDate => {\n        onDateChanged(newDate);\n        setDate(newDate);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DatePickerWrapper, {\n      mode: undefined,\n      style: {\n        marginTop: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(ReactDatePicker, {\n        renderCustomHeader: renderCustomHeader(),\n        selected: date,\n        onChange: newDate => {\n          const typedDate = newDate;\n          onDateChanged(typedDate);\n          setDate(typedDate);\n        },\n        disabledKeyboardNavigation: true,\n        inline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Dropdown, {\n    content: renderModePicker(),\n    maxWidth: \"auto\",\n    children: /*#__PURE__*/_jsxDEV(Button, {\n      icon: \"Calendar\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        ref: spanRef,\n        children: `${dayjs(initialDate).format('YYYY/MM/DD HH:mm')}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(DatePicker, \"7vP5Pm0BblETM+r/Yd83TOex5Yo=\");\n_c = DatePicker;\nvar _c;\n$RefreshReg$(_c, \"DatePicker\");","map":{"version":3,"names":["useState","useRef","useMemo","ReactDatePicker","dayjs","noop","Dropdown","Button","DatePickerInput","renderCustomHeader","DatePickerWrapper","DatePicker","initialDate","Date","onDateChanged","spanRef","offsetTop","offsetHeight","current","maxHeight","Math","max","window","innerHeight","date","setDate","renderModePicker","display","flexDirection","boxShadow","padding","background","overflow","newDate","undefined","marginTop","typedDate","format"],"sources":["/Volumes/csvol/fusion/libs/shared/plotting-components/src/TimeseriesChart/components/DateRangePicker/DatePicker/DatePicker.tsx"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { useState, useRef, useMemo } from 'react';\nimport ReactDatePicker from 'react-datepicker';\n\nimport dayjs from 'dayjs';\nimport noop from 'lodash/noop';\n\nimport { Dropdown, Button } from '@cognite/cogs.js';\n\nimport { DatePickerInput, renderCustomHeader } from './Common';\nimport { DatePickerWrapper } from './elements';\n\nexport type DatePickerProps = {\n  initialDate?: Date;\n  onDateChanged?: (date: Date) => void;\n};\n\nexport const DatePicker = ({\n  initialDate = new Date(),\n  onDateChanged = noop,\n}: DatePickerProps) => {\n  // Cogs is stupid af so we have to ref the span\n  const spanRef = useRef<HTMLSpanElement>(null);\n\n  const { offsetTop, offsetHeight } = spanRef?.current || {\n    offsetTop: 0,\n    offsetHeight: 0,\n  };\n\n  const maxHeight = useMemo(\n    () => Math.max(window.innerHeight - offsetTop - offsetHeight - 100, 400),\n    [offsetTop, offsetHeight]\n  );\n\n  const [date, setDate] = useState<Date>(initialDate);\n\n  const renderModePicker = () => (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        boxShadow: '0 0 16px lightgrey',\n        padding: 16,\n        background: '#fff',\n        maxHeight,\n        overflow: 'auto',\n      }}\n    >\n      <DatePickerInput\n        date={date}\n        onDateChange={(newDate) => {\n          onDateChanged(newDate);\n          setDate(newDate);\n        }}\n      />\n      <DatePickerWrapper mode={undefined} style={{ marginTop: 8 }}>\n        <ReactDatePicker\n          renderCustomHeader={renderCustomHeader()}\n          selected={date}\n          onChange={(newDate) => {\n            const typedDate = newDate as Date;\n            onDateChanged(typedDate);\n            setDate(typedDate);\n          }}\n          disabledKeyboardNavigation\n          inline\n        />\n      </DatePickerWrapper>\n    </div>\n  );\n\n  return (\n    <Dropdown content={renderModePicker()} maxWidth=\"auto\">\n      <Button icon=\"Calendar\">\n        <span ref={spanRef}>{`${dayjs(initialDate).format(\n          'YYYY/MM/DD HH:mm'\n        )}`}</span>\n      </Button>\n    </Dropdown>\n  );\n};\n"],"mappings":";;AAAA;AACA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,OAAO,QAAQ,OAAO;AACjD,OAAOC,eAAe,MAAM,kBAAkB;AAE9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,IAAI,MAAM,aAAa;AAE9B,SAASC,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;AAEnD,SAASC,eAAe,EAAEC,kBAAkB,QAAQ,UAAU;AAC9D,SAASC,iBAAiB,QAAQ,YAAY;AAAC;AAO/C,OAAO,MAAMC,UAAU,GAAG,CAAC;EACzBC,WAAW,GAAG,IAAIC,IAAI,EAAE;EACxBC,aAAa,GAAGT;AACD,CAAC,KAAK;EAAA;EACrB;EACA,MAAMU,OAAO,GAAGd,MAAM,CAAkB,IAAI,CAAC;EAE7C,MAAM;IAAEe,SAAS;IAAEC;EAAa,CAAC,GAAGF,OAAO,EAAEG,OAAO,IAAI;IACtDF,SAAS,EAAE,CAAC;IACZC,YAAY,EAAE;EAChB,CAAC;EAED,MAAME,SAAS,GAAGjB,OAAO,CACvB,MAAMkB,IAAI,CAACC,GAAG,CAACC,MAAM,CAACC,WAAW,GAAGP,SAAS,GAAGC,YAAY,GAAG,GAAG,EAAE,GAAG,CAAC,EACxE,CAACD,SAAS,EAAEC,YAAY,CAAC,CAC1B;EAED,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGzB,QAAQ,CAAOY,WAAW,CAAC;EAEnD,MAAMc,gBAAgB,GAAG,mBACvB;IACE,KAAK,EAAE;MACLC,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,QAAQ;MACvBC,SAAS,EAAE,oBAAoB;MAC/BC,OAAO,EAAE,EAAE;MACXC,UAAU,EAAE,MAAM;MAClBZ,SAAS;MACTa,QAAQ,EAAE;IACZ,CAAE;IAAA,wBAEF,QAAC,eAAe;MACd,IAAI,EAAER,IAAK;MACX,YAAY,EAAGS,OAAO,IAAK;QACzBnB,aAAa,CAACmB,OAAO,CAAC;QACtBR,OAAO,CAACQ,OAAO,CAAC;MAClB;IAAE;MAAA;MAAA;MAAA;IAAA,QACF,eACF,QAAC,iBAAiB;MAAC,IAAI,EAAEC,SAAU;MAAC,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAE,CAAE;MAAA,uBAC1D,QAAC,eAAe;QACd,kBAAkB,EAAE1B,kBAAkB,EAAG;QACzC,QAAQ,EAAEe,IAAK;QACf,QAAQ,EAAGS,OAAO,IAAK;UACrB,MAAMG,SAAS,GAAGH,OAAe;UACjCnB,aAAa,CAACsB,SAAS,CAAC;UACxBX,OAAO,CAACW,SAAS,CAAC;QACpB,CAAE;QACF,0BAA0B;QAC1B,MAAM;MAAA;QAAA;QAAA;QAAA;MAAA;IACN;MAAA;MAAA;MAAA;IAAA,QACgB;EAAA;IAAA;IAAA;IAAA;EAAA,QAEvB;EAED,oBACE,QAAC,QAAQ;IAAC,OAAO,EAAEV,gBAAgB,EAAG;IAAC,QAAQ,EAAC,MAAM;IAAA,uBACpD,QAAC,MAAM;MAAC,IAAI,EAAC,UAAU;MAAA,uBACrB;QAAM,GAAG,EAAEX,OAAQ;QAAA,UAAG,GAAEX,KAAK,CAACQ,WAAW,CAAC,CAACyB,MAAM,CAC/C,kBAAkB,CAClB;MAAC;QAAA;QAAA;QAAA;MAAA;IAAQ;MAAA;MAAA;MAAA;IAAA;EACJ;IAAA;IAAA;IAAA;EAAA,QACA;AAEf,CAAC;AAAC,GA/DW1B,UAAU;AAAA,KAAVA,UAAU;AAAA;AAAA"},"metadata":{},"sourceType":"module"}
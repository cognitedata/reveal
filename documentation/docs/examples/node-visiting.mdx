---
id: node-visiting
title: Node visitor functions
describe: Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
---

import { LiveCodeSnippet } from '../../src/components/LiveCodeSnippet';
import { DemoWrapper } from '../../src/components/DemoWrapper';

Reveal has functions for iterating over CAD nodes, either all nodes in a 3D model or a subtree of a parent node.
Note that all functions are async, and the action that you pass is not applied immediately. A single model can 
have millions of nodes. To avoid long blocking operations the action is applied in blocks, allowing for an 
interactive page while the action is being applied.

<DemoWrapper
  modelId={4715379429968321}
  revisionId={5688854005909501}
  name="Cognite3DViewerDemo"
/>

## Iterate over all nodes

This example only demonstrates how iteration over model nodes performed gradually.
For more efficient coloring consult our [coloring examples](./cad-colors.mdx).

<LiveCodeSnippet>
{`
model
  .iterateNodesByTreeIndex(
    treeIndex => model.setNodeColorByTreeIndex(treeIndex, 127, 127, 127)
  )
  .then(() => alert('Iteration is done!'));
`}
</LiveCodeSnippet>

## Iterate over subtree nodes

`Cognite3DModel.iterateSubtreeByTreeIndex` iterates over all descendants of a node by tree index. The provided
tree index is included in the set of visited nodes. The following example sets the color of all descendants of
a node. This mimics the functionality of `Cognite3DModel.setNodesColorsByTreeIndex` with `applyToChildren`
set to `true`.

<LiveCodeSnippet>
{`
model.iterateSubtreeByTreeIndex(122, treeIndex => {
  model.setNodeColorByTreeIndex(treeIndex, 127, 255, 127);
});
`}
</LiveCodeSnippet>

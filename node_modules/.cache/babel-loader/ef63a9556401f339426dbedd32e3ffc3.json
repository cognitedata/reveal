{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMutation } from '@tanstack/react-query';\nimport { useSDK } from '@cognite/sdk-provider';\nimport { isNotUndefined } from '@data-exploration-lib/core';\nimport { isExtendedAnnotationAnnotation } from '../../utils';\nimport { persistAssetIds } from './useCreateAnnotation';\nconst persistAnnotationChanges = async (sdk, annotationChanges) => {\n  if (annotationChanges.length === 0) {\n    return;\n  }\n  return sdk.annotations.update(annotationChanges);\n};\nexport const useUpdateAnnotations = options => {\n  _s();\n  const sdk = useSDK();\n  const {\n    mutate\n  } = useMutation(async annotations => {\n    return Promise.all([persistAnnotationChanges(sdk, annotations.filter(isExtendedAnnotationAnnotation).map(extendedAnnotationAnnotation => ({\n      id: extendedAnnotationAnnotation.metadata.id,\n      update: {\n        annotationType: {\n          set: extendedAnnotationAnnotation.metadata.annotationType\n        },\n        status: {\n          set: extendedAnnotationAnnotation.metadata.status\n        },\n        data: {\n          set: extendedAnnotationAnnotation.metadata.data\n        }\n      }\n    })).filter(isNotUndefined)), persistAssetIds(sdk, annotations)]);\n  }, options);\n  return mutate;\n};\n_s(useUpdateAnnotations, \"5CKvRoSLrTsxDJgpsa4x7mNWqQQ=\", false, function () {\n  return [useSDK, useMutation];\n});","map":{"version":3,"names":["useMutation","useSDK","isNotUndefined","isExtendedAnnotationAnnotation","persistAssetIds","persistAnnotationChanges","sdk","annotationChanges","length","annotations","update","useUpdateAnnotations","options","mutate","Promise","all","filter","map","extendedAnnotationAnnotation","id","metadata","annotationType","set","status","data"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/annotations/service/actions/useUpdateAnnotations.ts"],"sourcesContent":["import { useMutation } from '@tanstack/react-query';\n\nimport { CogniteClient } from '@cognite/sdk';\nimport { AnnotationChangeById } from '@cognite/sdk/dist/src/types';\nimport { useSDK } from '@cognite/sdk-provider';\n\nimport { ExtendedAnnotation, isNotUndefined } from '@data-exploration-lib/core';\n\nimport { isExtendedAnnotationAnnotation } from '../../utils';\n\nimport { persistAssetIds } from './useCreateAnnotation';\n\nconst persistAnnotationChanges = async (\n  sdk: CogniteClient,\n  annotationChanges: AnnotationChangeById[]\n) => {\n  if (annotationChanges.length === 0) {\n    return;\n  }\n\n  return sdk.annotations.update(annotationChanges);\n};\n\nexport const useUpdateAnnotations = (options: any) => {\n  const sdk = useSDK();\n  const { mutate } = useMutation(async (annotations: ExtendedAnnotation[]) => {\n    return Promise.all([\n      persistAnnotationChanges(\n        sdk,\n        annotations\n          .filter(isExtendedAnnotationAnnotation)\n          .map((extendedAnnotationAnnotation) => ({\n            id: extendedAnnotationAnnotation.metadata.id,\n            update: {\n              annotationType: {\n                set: extendedAnnotationAnnotation.metadata.annotationType,\n              },\n              status: {\n                set: extendedAnnotationAnnotation.metadata.status,\n              },\n              data: {\n                set: extendedAnnotationAnnotation.metadata.data,\n              },\n            },\n          }))\n          .filter(isNotUndefined)\n      ),\n      persistAssetIds(sdk, annotations),\n    ]);\n  }, options);\n\n  return mutate;\n};\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,uBAAuB;AAInD,SAASC,MAAM,QAAQ,uBAAuB;AAE9C,SAA6BC,cAAc,QAAQ,4BAA4B;AAE/E,SAASC,8BAA8B,QAAQ,aAAa;AAE5D,SAASC,eAAe,QAAQ,uBAAuB;AAEvD,MAAMC,wBAAwB,GAAG,OAC/BC,GAAkB,EAClBC,iBAAyC,KACtC;EACH,IAAIA,iBAAiB,CAACC,MAAM,KAAK,CAAC,EAAE;IAClC;EACF;EAEA,OAAOF,GAAG,CAACG,WAAW,CAACC,MAAM,CAACH,iBAAiB,CAAC;AAClD,CAAC;AAED,OAAO,MAAMI,oBAAoB,GAAIC,OAAY,IAAK;EAAA;EACpD,MAAMN,GAAG,GAAGL,MAAM,EAAE;EACpB,MAAM;IAAEY;EAAO,CAAC,GAAGb,WAAW,CAAC,MAAOS,WAAiC,IAAK;IAC1E,OAAOK,OAAO,CAACC,GAAG,CAAC,CACjBV,wBAAwB,CACtBC,GAAG,EACHG,WAAW,CACRO,MAAM,CAACb,8BAA8B,CAAC,CACtCc,GAAG,CAAEC,4BAA4B,KAAM;MACtCC,EAAE,EAAED,4BAA4B,CAACE,QAAQ,CAACD,EAAE;MAC5CT,MAAM,EAAE;QACNW,cAAc,EAAE;UACdC,GAAG,EAAEJ,4BAA4B,CAACE,QAAQ,CAACC;QAC7C,CAAC;QACDE,MAAM,EAAE;UACND,GAAG,EAAEJ,4BAA4B,CAACE,QAAQ,CAACG;QAC7C,CAAC;QACDC,IAAI,EAAE;UACJF,GAAG,EAAEJ,4BAA4B,CAACE,QAAQ,CAACI;QAC7C;MACF;IACF,CAAC,CAAC,CAAC,CACFR,MAAM,CAACd,cAAc,CAAC,CAC1B,EACDE,eAAe,CAACE,GAAG,EAAEG,WAAW,CAAC,CAClC,CAAC;EACJ,CAAC,EAAEG,OAAO,CAAC;EAEX,OAAOC,MAAM;AACf,CAAC;AAAC,GA7BWF,oBAAoB;EAAA,QACnBV,MAAM,EACCD,WAAW;AAAA"},"metadata":{},"sourceType":"module"}
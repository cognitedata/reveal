{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo } from 'react';\nimport { EMPTY_OBJECT } from '@data-exploration-lib/core';\nimport { useDocumentSearchQuery } from '../../service';\nimport { mapFiltersToDocumentSearchFilters, mapTableSortByToDocumentSortFields, normalize } from '../transformers';\nexport const useDocumentSearchResultQuery = ({\n  filter = EMPTY_OBJECT,\n  limit,\n  query,\n  sortBy\n} = {}, options = {}, searchConfig) => {\n  _s();\n  const transformFilter = useMemo(() => mapFiltersToDocumentSearchFilters(filter, query, searchConfig), [filter, query, searchConfig]);\n  const sort = useMemo(() => mapTableSortByToDocumentSortFields(sortBy), [sortBy]);\n  const response = useDocumentSearchQuery({\n    filter: transformFilter,\n    sort,\n    limit\n  }, {\n    ...options\n  });\n  const results = response?.data ? response.data?.pages.reduce((result, page) => {\n    return [...result, ...page.items];\n  }, []) : [];\n  return {\n    ...response,\n    results: normalize(results)\n  };\n};\n_s(useDocumentSearchResultQuery, \"T5VIW733wJqdSbM+s9z3e78s4AE=\", false, function () {\n  return [useDocumentSearchQuery];\n});","map":{"version":3,"names":["useMemo","EMPTY_OBJECT","useDocumentSearchQuery","mapFiltersToDocumentSearchFilters","mapTableSortByToDocumentSortFields","normalize","useDocumentSearchResultQuery","filter","limit","query","sortBy","options","searchConfig","transformFilter","sort","response","results","data","pages","reduce","result","page","items"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/documents/internal/queries/useDocumentSearchResultQuery.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport { UseInfiniteQueryOptions } from '@tanstack/react-query';\n\nimport { DocumentSearchItem } from '@cognite/sdk';\n\nimport {\n  EMPTY_OBJECT,\n  FileConfigType,\n  InternalDocumentFilter,\n} from '@data-exploration-lib/core';\n\nimport { TableSortBy } from '../../../types';\nimport { useDocumentSearchQuery } from '../../service';\nimport {\n  mapFiltersToDocumentSearchFilters,\n  mapTableSortByToDocumentSortFields,\n  normalize,\n} from '../transformers';\n\nexport const useDocumentSearchResultQuery = (\n  {\n    filter = EMPTY_OBJECT,\n    limit,\n    query,\n    sortBy,\n  }: {\n    filter?: InternalDocumentFilter;\n    query?: string;\n    limit?: number;\n    sortBy?: TableSortBy[];\n  } = {},\n  options: UseInfiniteQueryOptions = {},\n  searchConfig?: FileConfigType\n) => {\n  const transformFilter = useMemo(\n    () => mapFiltersToDocumentSearchFilters(filter, query, searchConfig),\n    [filter, query, searchConfig]\n  );\n\n  const sort = useMemo(\n    () => mapTableSortByToDocumentSortFields(sortBy),\n    [sortBy]\n  );\n\n  const response = useDocumentSearchQuery(\n    {\n      filter: transformFilter as any,\n      sort,\n      limit,\n    },\n    { ...options }\n  );\n\n  const results = response?.data\n    ? response.data?.pages.reduce((result: DocumentSearchItem[], page) => {\n        return [...result, ...page.items];\n      }, [])\n    : [];\n\n  return {\n    ...response,\n    results: normalize(results),\n  };\n};\n"],"mappings":";AAAA,SAASA,OAAO,QAAQ,OAAO;AAM/B,SACEC,YAAY,QAGP,4BAA4B;AAGnC,SAASC,sBAAsB,QAAQ,eAAe;AACtD,SACEC,iCAAiC,EACjCC,kCAAkC,EAClCC,SAAS,QACJ,iBAAiB;AAExB,OAAO,MAAMC,4BAA4B,GAAG,CAC1C;EACEC,MAAM,GAAGN,YAAY;EACrBO,KAAK;EACLC,KAAK;EACLC;AAMF,CAAC,GAAG,CAAC,CAAC,EACNC,OAAgC,GAAG,CAAC,CAAC,EACrCC,YAA6B,KAC1B;EAAA;EACH,MAAMC,eAAe,GAAGb,OAAO,CAC7B,MAAMG,iCAAiC,CAACI,MAAM,EAAEE,KAAK,EAAEG,YAAY,CAAC,EACpE,CAACL,MAAM,EAAEE,KAAK,EAAEG,YAAY,CAAC,CAC9B;EAED,MAAME,IAAI,GAAGd,OAAO,CAClB,MAAMI,kCAAkC,CAACM,MAAM,CAAC,EAChD,CAACA,MAAM,CAAC,CACT;EAED,MAAMK,QAAQ,GAAGb,sBAAsB,CACrC;IACEK,MAAM,EAAEM,eAAsB;IAC9BC,IAAI;IACJN;EACF,CAAC,EACD;IAAE,GAAGG;EAAQ,CAAC,CACf;EAED,MAAMK,OAAO,GAAGD,QAAQ,EAAEE,IAAI,GAC1BF,QAAQ,CAACE,IAAI,EAAEC,KAAK,CAACC,MAAM,CAAC,CAACC,MAA4B,EAAEC,IAAI,KAAK;IAClE,OAAO,CAAC,GAAGD,MAAM,EAAE,GAAGC,IAAI,CAACC,KAAK,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC,GACN,EAAE;EAEN,OAAO;IACL,GAAGP,QAAQ;IACXC,OAAO,EAAEX,SAAS,CAACW,OAAO;EAC5B,CAAC;AACH,CAAC;AAAC,GA5CWV,4BAA4B;EAAA,QAyBtBJ,sBAAsB;AAAA"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Volumes/csvol/fusion/apps/functions-ui/src/components/FunctionSchedules.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Table, Alert, List } from 'antd';\nimport cronstrue from 'cronstrue';\nimport moment from 'moment';\nimport CreateScheduleButton from '../components/buttons/CreateScheduleButton';\nimport DeleteScheduleButton from '../components/buttons/DeleteScheduleButton';\nimport ViewInputDataButton from '../components/buttons/ViewInputDataButton';\nimport LoadingIcon from '../components/LoadingIcon';\nimport { isOIDCFlow } from '../utils/api';\nimport { useSchedules } from '../utils/hooks';\nimport FunctionCalls from './FunctionCalls';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst scheduleTableColumns = [{\n  title: 'Schedule Info',\n  key: 'scheduleInfo',\n  render: s => {\n    return /*#__PURE__*/_jsxDEV(List.Item, {\n      style: {\n        verticalAlign: 'middle'\n      },\n      children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n        title: s.name,\n        description: s.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }, this);\n  }\n}, {\n  title: 'Cron Expression',\n  key: 'cronExpression',\n  render: s => {\n    return s.cronExpression;\n  }\n}, {\n  title: 'Occurs',\n  key: 'cronExpressionDescription',\n  render: s => {\n    return cronstrue.toString(s.cronExpression);\n  }\n}, {\n  title: 'Created Time',\n  key: 'createdTime',\n  render: s => {\n    return moment(s.createdTime).format('MM-DD-YYYY HH:mm');\n  }\n}, {\n  title: 'Input Data',\n  key: 'inputData',\n  render: s => {\n    return /*#__PURE__*/_jsxDEV(ViewInputDataButton, {\n      id: s.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 14\n    }, this);\n  }\n}, {\n  title: 'Delete',\n  key: 'deleteSchedule',\n  render: s => {\n    return /*#__PURE__*/_jsxDEV(DeleteScheduleButton, {\n      id: s.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 14\n    }, this);\n  }\n}];\nexport default function FunctionSchedules({\n  externalId,\n  id\n}) {\n  _s();\n  const {\n    data,\n    isFetched,\n    error\n  } = useSchedules();\n  const schedules = data?.filter(s => {\n    return s.functionExternalId && s.functionExternalId === externalId || s.functionId && s.functionId === id;\n  })?.sort((a, b) => {\n    if (a.createdTime > b.createdTime) {\n      return -1;\n    }\n    if (a.createdTime < b.createdTime) {\n      return 1;\n    }\n    return 0;\n  }) || [];\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Alert, {\n      type: \"error\",\n      message: `Something went wrong when getting the schedule details for ${externalId}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n  if (!isFetched) {\n    return /*#__PURE__*/_jsxDEV(LoadingIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isOIDCFlow() || externalId ? /*#__PURE__*/_jsxDEV(CreateScheduleButton, {\n      externalId: externalId,\n      id: id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(Table, {\n      rowKey: s => s.id.toString(),\n      pagination: {\n        pageSize: 25,\n        showSizeChanger: false\n      },\n      dataSource: schedules,\n      columns: scheduleTableColumns,\n      expandedRowRender: s => {\n        return /*#__PURE__*/_jsxDEV(FunctionCalls, {\n          name: s.name,\n          id: id,\n          scheduleId: s.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 18\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(FunctionSchedules, \"Gr/if6yA1ziRKv5di5Ssx0W044w=\", false, function () {\n  return [useSchedules];\n});\n_c = FunctionSchedules;\nvar _c;\n$RefreshReg$(_c, \"FunctionSchedules\");","map":{"version":3,"names":["React","Table","Alert","List","cronstrue","moment","CreateScheduleButton","DeleteScheduleButton","ViewInputDataButton","LoadingIcon","isOIDCFlow","useSchedules","FunctionCalls","scheduleTableColumns","title","key","render","s","verticalAlign","name","description","cronExpression","toString","createdTime","format","id","FunctionSchedules","externalId","data","isFetched","error","schedules","filter","functionExternalId","functionId","sort","a","b","pageSize","showSizeChanger"],"sources":["/Volumes/csvol/fusion/apps/functions-ui/src/components/FunctionSchedules.tsx"],"sourcesContent":["import React from 'react';\n\nimport { Table, Alert, List } from 'antd';\nimport cronstrue from 'cronstrue';\nimport moment from 'moment';\n\nimport CreateScheduleButton from '../components/buttons/CreateScheduleButton';\nimport DeleteScheduleButton from '../components/buttons/DeleteScheduleButton';\nimport ViewInputDataButton from '../components/buttons/ViewInputDataButton';\nimport LoadingIcon from '../components/LoadingIcon';\nimport { Schedule } from '../types';\nimport { isOIDCFlow } from '../utils/api';\nimport { useSchedules } from '../utils/hooks';\n\nimport FunctionCalls from './FunctionCalls';\n\nconst scheduleTableColumns = [\n  {\n    title: 'Schedule Info',\n    key: 'scheduleInfo',\n    render: (s: Schedule) => {\n      return (\n        <List.Item style={{ verticalAlign: 'middle' }}>\n          <List.Item.Meta title={s.name} description={s.description} />\n        </List.Item>\n      );\n    },\n  },\n  {\n    title: 'Cron Expression',\n    key: 'cronExpression',\n    render: (s: Schedule) => {\n      return s.cronExpression;\n    },\n  },\n  {\n    title: 'Occurs',\n    key: 'cronExpressionDescription',\n    render: (s: Schedule) => {\n      return cronstrue.toString(s.cronExpression);\n    },\n  },\n  {\n    title: 'Created Time',\n    key: 'createdTime',\n    render: (s: Schedule) => {\n      return moment(s.createdTime).format('MM-DD-YYYY HH:mm');\n    },\n  },\n  {\n    title: 'Input Data',\n    key: 'inputData',\n    render: (s: Schedule) => {\n      return <ViewInputDataButton id={s.id} />;\n    },\n  },\n  {\n    title: 'Delete',\n    key: 'deleteSchedule',\n    render: (s: Schedule) => {\n      return <DeleteScheduleButton id={s.id} />;\n    },\n  },\n];\n\ntype Props = {\n  externalId?: string;\n  id: number;\n};\n\nexport default function FunctionSchedules({ externalId, id }: Props) {\n  const { data, isFetched, error } = useSchedules();\n  const schedules =\n    data\n      ?.filter((s) => {\n        return (\n          (s.functionExternalId && s.functionExternalId === externalId) ||\n          (s.functionId && s.functionId === id)\n        );\n      })\n      ?.sort((a: Schedule, b: Schedule) => {\n        if (a.createdTime > b.createdTime) {\n          return -1;\n        }\n        if (a.createdTime < b.createdTime) {\n          return 1;\n        }\n        return 0;\n      }) || [];\n\n  if (error) {\n    return (\n      <Alert\n        type=\"error\"\n        message={`Something went wrong when getting the schedule details for ${externalId}`}\n      />\n    );\n  }\n  if (!isFetched) {\n    return <LoadingIcon />;\n  }\n\n  return (\n    <>\n      {isOIDCFlow() || externalId ? (\n        <CreateScheduleButton externalId={externalId} id={id} />\n      ) : null}\n      <Table\n        rowKey={(s) => s.id.toString()}\n        pagination={{ pageSize: 25, showSizeChanger: false }}\n        dataSource={schedules}\n        columns={scheduleTableColumns}\n        expandedRowRender={(s: Schedule) => {\n          return <FunctionCalls name={s.name} id={id} scheduleId={s.id} />;\n        }}\n      />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Volumes/csvol/fusion/libs/shared/plotting-components/src/LineChart/components/HoverLayer/HoverLayer.tsx\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport { useHoveredDatapoint } from '../../hooks/useHoveredDatapoint';\nimport { getPlotStyleData } from '../../utils/getPlotStyleData';\nimport { HoverLayerWrapper } from './elements';\nimport { HoverLine } from './HoverLine';\nimport { HoverLineInfo } from './HoverLineInfo';\nimport { HoverMarker } from './HoverMarker';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const HoverLayer = ({\n  chartRef,\n  layout,\n  variant,\n  plotHoverEvent,\n  cursorPosition,\n  isContinuousHover,\n  formatHoverLineInfo\n}) => {\n  _s();\n  const {\n    showHoverLine,\n    showHoverLineInfo,\n    showHoverMarker,\n    showMarkers\n  } = layout;\n  const datapoint = useHoveredDatapoint(plotHoverEvent);\n  const plotStyleData = getPlotStyleData(chartRef.current);\n  const hoverLinePosition = isContinuousHover ? cursorPosition : datapoint.position;\n  const hoverMarkerPosition = {\n    x: showMarkers ? datapoint.position.x : cursorPosition?.x,\n    y: datapoint.position.y\n  };\n  return /*#__PURE__*/_jsxDEV(HoverLayerWrapper, {\n    style: {\n      display: plotHoverEvent ? 'initial' : 'none'\n    },\n    children: [/*#__PURE__*/_jsxDEV(HoverLine, {\n      isVisible: showHoverLine,\n      position: hoverLinePosition,\n      plotStyleData: plotStyleData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HoverLineInfo, {\n      chartRef: chartRef,\n      isVisible: showHoverLine && showHoverLineInfo,\n      position: hoverLinePosition,\n      plotStyleData: plotStyleData,\n      plotHoverEvent: plotHoverEvent,\n      formatHoverLineInfo: formatHoverLineInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HoverMarker, {\n      isVisible: showHoverMarker,\n      position: hoverMarkerPosition,\n      variant: variant,\n      markerColor: datapoint.color\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(HoverLayer, \"EqMJiJCaax6sHvXZKAYPUzq4in8=\", false, function () {\n  return [useHoveredDatapoint];\n});\n_c = HoverLayer;\nvar _c;\n$RefreshReg$(_c, \"HoverLayer\");","map":{"version":3,"names":["React","useHoveredDatapoint","getPlotStyleData","HoverLayerWrapper","HoverLine","HoverLineInfo","HoverMarker","HoverLayer","chartRef","layout","variant","plotHoverEvent","cursorPosition","isContinuousHover","formatHoverLineInfo","showHoverLine","showHoverLineInfo","showHoverMarker","showMarkers","datapoint","plotStyleData","current","hoverLinePosition","position","hoverMarkerPosition","x","y","display","color"],"sources":["/Volumes/csvol/fusion/libs/shared/plotting-components/src/LineChart/components/HoverLayer/HoverLayer.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { PlotHoverEvent } from 'plotly.js';\n\nimport { useHoveredDatapoint } from '../../hooks/useHoveredDatapoint';\nimport { Coordinate, HoverLineData, Layout, Variant } from '../../types';\nimport { getPlotStyleData } from '../../utils/getPlotStyleData';\n\nimport { HoverLayerWrapper } from './elements';\nimport { HoverLine } from './HoverLine';\nimport { HoverLineInfo } from './HoverLineInfo';\nimport { HoverMarker } from './HoverMarker';\n\nexport interface HoverLayerProps {\n  chartRef: React.RefObject<HTMLDivElement>;\n  layout: Layout;\n  variant?: Variant;\n  plotHoverEvent?: PlotHoverEvent;\n  cursorPosition?: Coordinate;\n  isContinuousHover: boolean;\n  formatHoverLineInfo?: (props: HoverLineData) => string;\n}\n\nexport const HoverLayer: React.FC<HoverLayerProps> = ({\n  chartRef,\n  layout,\n  variant,\n  plotHoverEvent,\n  cursorPosition,\n  isContinuousHover,\n  formatHoverLineInfo,\n}) => {\n  const { showHoverLine, showHoverLineInfo, showHoverMarker, showMarkers } =\n    layout;\n\n  const datapoint = useHoveredDatapoint(plotHoverEvent);\n\n  const plotStyleData = getPlotStyleData(chartRef.current);\n\n  const hoverLinePosition = isContinuousHover\n    ? cursorPosition\n    : datapoint.position;\n\n  const hoverMarkerPosition = {\n    x: showMarkers ? datapoint.position.x : cursorPosition?.x,\n    y: datapoint.position.y,\n  };\n\n  return (\n    <HoverLayerWrapper\n      style={{\n        display: plotHoverEvent ? 'initial' : 'none',\n      }}\n    >\n      <HoverLine\n        isVisible={showHoverLine}\n        position={hoverLinePosition}\n        plotStyleData={plotStyleData}\n      />\n\n      <HoverLineInfo\n        chartRef={chartRef}\n        isVisible={showHoverLine && showHoverLineInfo}\n        position={hoverLinePosition}\n        plotStyleData={plotStyleData}\n        plotHoverEvent={plotHoverEvent}\n        formatHoverLineInfo={formatHoverLineInfo}\n      />\n\n      <HoverMarker\n        isVisible={showHoverMarker}\n        position={hoverMarkerPosition}\n        variant={variant}\n        markerColor={datapoint.color}\n      />\n    </HoverLayerWrapper>\n  );\n};\n"],"mappings":";;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAI9B,SAASC,mBAAmB,QAAQ,iCAAiC;AAErE,SAASC,gBAAgB,QAAQ,8BAA8B;AAE/D,SAASC,iBAAiB,QAAQ,YAAY;AAC9C,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,SAASC,WAAW,QAAQ,eAAe;AAAC;AAY5C,OAAO,MAAMC,UAAqC,GAAG,CAAC;EACpDC,QAAQ;EACRC,MAAM;EACNC,OAAO;EACPC,cAAc;EACdC,cAAc;EACdC,iBAAiB;EACjBC;AACF,CAAC,KAAK;EAAA;EACJ,MAAM;IAAEC,aAAa;IAAEC,iBAAiB;IAAEC,eAAe;IAAEC;EAAY,CAAC,GACtET,MAAM;EAER,MAAMU,SAAS,GAAGlB,mBAAmB,CAACU,cAAc,CAAC;EAErD,MAAMS,aAAa,GAAGlB,gBAAgB,CAACM,QAAQ,CAACa,OAAO,CAAC;EAExD,MAAMC,iBAAiB,GAAGT,iBAAiB,GACvCD,cAAc,GACdO,SAAS,CAACI,QAAQ;EAEtB,MAAMC,mBAAmB,GAAG;IAC1BC,CAAC,EAAEP,WAAW,GAAGC,SAAS,CAACI,QAAQ,CAACE,CAAC,GAAGb,cAAc,EAAEa,CAAC;IACzDC,CAAC,EAAEP,SAAS,CAACI,QAAQ,CAACG;EACxB,CAAC;EAED,oBACE,QAAC,iBAAiB;IAChB,KAAK,EAAE;MACLC,OAAO,EAAEhB,cAAc,GAAG,SAAS,GAAG;IACxC,CAAE;IAAA,wBAEF,QAAC,SAAS;MACR,SAAS,EAAEI,aAAc;MACzB,QAAQ,EAAEO,iBAAkB;MAC5B,aAAa,EAAEF;IAAc;MAAA;MAAA;MAAA;IAAA,QAC7B,eAEF,QAAC,aAAa;MACZ,QAAQ,EAAEZ,QAAS;MACnB,SAAS,EAAEO,aAAa,IAAIC,iBAAkB;MAC9C,QAAQ,EAAEM,iBAAkB;MAC5B,aAAa,EAAEF,aAAc;MAC7B,cAAc,EAAET,cAAe;MAC/B,mBAAmB,EAAEG;IAAoB;MAAA;MAAA;MAAA;IAAA,QACzC,eAEF,QAAC,WAAW;MACV,SAAS,EAAEG,eAAgB;MAC3B,QAAQ,EAAEO,mBAAoB;MAC9B,OAAO,EAAEd,OAAQ;MACjB,WAAW,EAAES,SAAS,CAACS;IAAM;MAAA;MAAA;MAAA;IAAA,QAC7B;EAAA;IAAA;IAAA;IAAA;EAAA,QACgB;AAExB,CAAC;AAAC,GAtDWrB,UAAqC;EAAA,QAY9BN,mBAAmB;AAAA;AAAA,KAZ1BM,UAAqC;AAAA;AAAA"},"metadata":{},"sourceType":"module"}
{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./createDetailedGeometry.ts","webpack:///./RevealParserWorker.ts","webpack:///./node_modules/comlink/dist/esm/comlink.mjs","webpack:///./index.ts"],"names":["root","factory","exports","module","define","amd","a","i","self","chunkIds","moreModules","moduleId","modules","length","installedChunks","pop","installedModules","0","installedWasmModules","wasmImportObjects","2","p0i32","p1i32","p0f64","p2i32","__webpack_require__","l","call","e","chunkId","promises","push","Promise","resolve","then","importScripts","p","forEach","wasmModuleId","installedWasmModuleData","promise","importObject","req","fetch","WebAssembly","compileStreaming","all","items","instantiate","instantiateStreaming","x","arrayBuffer","bytes","res","w","instance","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","s","groupMeshesByNumber","fileIds","meshesGroupedByFile","Map","fileId","oldValue","set","createOffsetsArray","array","offsets","Array","rustModule","buffer","sectorData","parse_and_convert_sector","instanceMeshes","this","extractInstanceMeshes","triangleMeshes","extractTriangleMeshes","parsedPrimitives","extractParsedPrimitives","parseResult","treeIndexToNodeIdMap","tree_index_to_node_id_map","nodeIdToTreeIndexMap","node_id_to_tree_index_map","primitives","free","ctm","parse_ctm","result","indices","vertices","normals","parse_and_convert_f3df","faces","i3dFile","ctmFiles","async","finalTriangleMeshes","colors","triangleCounts","treeIndices","finalMeshes","meshIndices","entries","fileTriangleCounts","map","fileName","sharedColors","Uint8Array","sharedTreeIndices","Float32Array","meshIdx","treeIndex","triOffset","triCount","g","b","triIdx","j","vIdx","mesh","finalInstanceMeshes","triangleOffsets","instanceMatrices","instancedMeshes","fileTriangleOffsets","Float64Array","fileMeshesGroupedByOffsets","triangleOffset","fileMeshIndices","triangleCount","instanceMatrixBuffer","treeIndicesBuffer","colorBuffer","instanceMatrix","slice","color","instances","createDetailedGeometry","boxCollection","box_collection","boxAttributes","convertToJSMemory","box_attributes","circleCollection","circle_collection","circleAttributes","circle_attributes","coneCollection","cone_collection","coneAttributes","cone_attributes","eccentricConeCollection","eccentric_cone_collection","eccentricConeAttributes","eccentric_cone_attributes","ellipsoidSegmentCollection","ellipsoid_segment_collection","ellipsoidSegmentAttributes","ellipsoid_segment_attributes","generalCylinderCollection","general_cylinder_collection","generalCylinderAttributes","general_cylinder_attributes","generalRingCollection","general_ring_collection","generalRingAttributes","general_ring_attributes","nutCollection","nut_collection","nutAttributes","nut_attributes","quadCollection","quad_collection","quadAttributes","quad_attributes","sphericalSegmentCollection","spherical_segment_collection","sphericalSegmentAttributes","spherical_segment_attributes","torusSegmentCollection","torus_segment_collection","torusSegmentAttributes","torus_segment_attributes","trapeziumCollection","trapezium_collection","trapeziumAttributes","trapezium_attributes","collection","triangle_mesh_collection","file_id","tree_index","triangle_count","sizes","size","instanced_mesh_collection","triangle_offset","instance_matrix","rustAttributes","jsAttributes","entry","attribute","offset","proxyMarker","createEndpoint","releaseProxy","throwMarker","isObject","val","transferHandlers","canHandle","obj","port1","port2","MessageChannel","expose","port","start","createProxy","ep","path","target","isProxyReleased","proxy","Proxy","_target","prop","throwIfProxyReleased","requestResponseMessage","type","toString","closeEndPoint","fromWireValue","rawValue","transferables","toWireValue","_thisArg","rawArgumentList","last","argumentList","processArguments","serialized","Error","isError","message","stack","assign","addEventListener","callback","ev","data","id","returnValue","parent","reduce","apply","transfers","transferCache","transfer","undefined","catch","wireValue","postMessage","removeEventListener","endpoint","constructor","isMessagePort","close","isReleased","processed","v","arr","concat","WeakMap","handler","serializedValue","serialize","deserialize","msg","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","join"],"mappings":"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","file":"reveal.parser.worker.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn "," \tself[\"webpackChunk\"] = function webpackChunkCallback(chunkIds, moreModules) {\n \t\tfor(var moduleId in moreModules) {\n \t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t}\n \t\twhile(chunkIds.length)\n \t\t\tinstalledChunks[chunkIds.pop()] = 1;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"1\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t0: 1\n \t};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \tfunction promiseResolve() { return Promise.resolve(); }\n\n \tvar wasmImportObjects = {\n \t\t2: function() {\n \t\t\treturn {\n \t\t\t\t\"./reveal_rs_wrapper_bg.js\": {\n \t\t\t\t\t\"__wbg_parsererror_new\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"N\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_object_drop_ref\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"U\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_string_new\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"W\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_object_clone_ref\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"T\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_59cb74e423758ede\": function() {\n \t\t\t\t\t\treturn installedModules[1].exports[\"E\"]();\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_stack_558ba5917b466edd\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"Q\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_error_4bb6c2a97407129a\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"A\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_attribute_new\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"y\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_number_new\": function(p0f64) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"S\"](p0f64);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_6b6f346b4912cdae\": function() {\n \t\t\t\t\t\treturn installedModules[1].exports[\"F\"]();\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_push_f353108e20ec67a0\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"O\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_d333a6e567133fdb\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"H\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_4d63b46bdff6e16c\": function() {\n \t\t\t\t\t\treturn installedModules[1].exports[\"D\"]();\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_set_dfa2f1a42cb24532\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"P\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_buffer_44855aefa83ea48c\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"z\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_newwithbyteoffsetandlength_0da86dad4d55fbae\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"J\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_04793d2c09ba060f\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"B\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_newwithbyteoffsetandlength_b86dda8c37255ca3\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"L\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_a0b63d55f22daf72\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"G\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_newwithbyteoffsetandlength_c9f84d09508543c6\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"M\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_05020d898fee9291\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"C\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_newwithbyteoffsetandlength_b2bf19ec76071ed8\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"K\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_ed94ebb0ae0424e3\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"I\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_throw\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"X\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_rethrow\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"V\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_memory\": function() {\n \t\t\t\t\t\treturn installedModules[1].exports[\"R\"]();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t};\n \t\t},\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n \t\tpromises.push(Promise.resolve().then(function() {\n \t\t\t// \"1\" is the signal for \"already loaded\"\n \t\t\tif(!installedChunks[chunkId]) {\n \t\t\t\timportScripts(__webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".js\");\n \t\t\t}\n \t\t}));\n\n \t\t// Fetch + compile chunk loading for webassembly\n\n \t\tvar wasmModules = {\"1\":[2]}[chunkId] || [];\n\n \t\twasmModules.forEach(function(wasmModuleId) {\n \t\t\tvar installedWasmModuleData = installedWasmModules[wasmModuleId];\n\n \t\t\t// a Promise means \"currently loading\" or \"already loaded\".\n \t\t\tif(installedWasmModuleData)\n \t\t\t\tpromises.push(installedWasmModuleData);\n \t\t\telse {\n \t\t\t\tvar importObject = wasmImportObjects[wasmModuleId]();\n \t\t\t\tvar req = fetch(__webpack_require__.p + \"\" + {\"2\":\"05093ad5b189ca050cc4\"}[wasmModuleId] + \".module.wasm\");\n \t\t\t\tvar promise;\n \t\t\t\tif(importObject instanceof Promise && typeof WebAssembly.compileStreaming === 'function') {\n \t\t\t\t\tpromise = Promise.all([WebAssembly.compileStreaming(req), importObject]).then(function(items) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(items[0], items[1]);\n \t\t\t\t\t});\n \t\t\t\t} else if(typeof WebAssembly.instantiateStreaming === 'function') {\n \t\t\t\t\tpromise = WebAssembly.instantiateStreaming(req, importObject);\n \t\t\t\t} else {\n \t\t\t\t\tvar bytesPromise = req.then(function(x) { return x.arrayBuffer(); });\n \t\t\t\t\tpromise = bytesPromise.then(function(bytes) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(bytes, importObject);\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t\tpromises.push(installedWasmModules[wasmModuleId] = promise.then(function(res) {\n \t\t\t\t\treturn __webpack_require__.w[wasmModuleId] = (res.instance || res).exports;\n \t\t\t\t}));\n \t\t\t}\n \t\t});\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://cdf-hub-bundles.cogniteapp.com/dependencies/@cognite/reveal-parser-worker/1.1.0/\";\n\n \t// object with all WebAssembly.instance exports\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*!\n * Copyright 2020 Cognite AS\n */\n\nimport { InstancedMesh, InstancedMeshFile, ParseCtmResult, ParseSectorResult, SectorGeometry, TriangleMesh } from \"./types\";\n\nexport async function createDetailedGeometry(\n  i3dFile: ParseSectorResult,\n  ctmFiles: Map<string, ParseCtmResult>\n): Promise<SectorGeometry> {\n  const { instanceMeshes, triangleMeshes } = i3dFile;\n\n  const finalTriangleMeshes = (() => {\n    const { fileIds, colors, triangleCounts, treeIndices } = triangleMeshes;\n\n    const meshesGroupedByFile = groupMeshesByNumber(fileIds);\n\n    const finalMeshes: TriangleMesh[] = [];\n    // Merge meshes by file\n    // TODO do this in Rust instead\n    for (const [fileId, meshIndices] of meshesGroupedByFile.entries()) {\n      const fileTriangleCounts = meshIndices.map(i => triangleCounts[i]);\n      const offsets = createOffsetsArray(fileTriangleCounts);\n      // Load CTM (geometry)\n      const fileName = `mesh_${fileId}.ctm`;\n      const { indices, vertices, normals } = ctmFiles.get(fileName)!; // TODO: j-bjorne 16-04-2020: try catch error???\n\n      const sharedColors = new Uint8Array(3 * indices.length);\n      const sharedTreeIndices = new Float32Array(indices.length);\n\n      for (let i = 0; i < meshIndices.length; i++) {\n        const meshIdx = meshIndices[i];\n        const treeIndex = treeIndices[meshIdx];\n        const triOffset = offsets[i];\n        const triCount = fileTriangleCounts[i];\n        const [r, g, b] = [colors[4 * meshIdx + 0], colors[4 * meshIdx + 1], colors[4 * meshIdx + 2]];\n        for (let triIdx = triOffset; triIdx < triOffset + triCount; triIdx++) {\n          for (let j = 0; j < 3; j++) {\n            const vIdx = indices[3 * triIdx + j];\n\n            sharedTreeIndices[vIdx] = treeIndex;\n\n            sharedColors[3 * vIdx] = r;\n            sharedColors[3 * vIdx + 1] = g;\n            sharedColors[3 * vIdx + 2] = b;\n          }\n        }\n      }\n\n      const mesh: TriangleMesh = {\n        colors: sharedColors,\n        fileId,\n        treeIndices: sharedTreeIndices,\n        indices,\n        vertices,\n        normals\n      };\n      finalMeshes.push(mesh);\n    }\n    return finalMeshes;\n  })();\n\n  const finalInstanceMeshes = (() => {\n    const { fileIds, colors, treeIndices, triangleCounts, triangleOffsets, instanceMatrices } = instanceMeshes;\n    const meshesGroupedByFile = groupMeshesByNumber(fileIds);\n\n    const finalMeshes: InstancedMeshFile[] = [];\n    // Merge meshes by file\n    // TODO do this in Rust instead\n    // TODO de-duplicate this with the merged meshes above\n    for (const [fileId, meshIndices] of meshesGroupedByFile.entries()) {\n      const fileName = `mesh_${fileId}.ctm`;\n      const ctm = ctmFiles.get(fileName)!;\n\n      const indices = ctm.indices;\n      const vertices = ctm.vertices;\n      const normals = ctm.normals;\n      const instancedMeshes: InstancedMesh[] = [];\n\n      const fileTriangleOffsets = new Float64Array(meshIndices.map(i => triangleOffsets[i]));\n      const fileTriangleCounts = new Float64Array(meshIndices.map(i => triangleCounts[i]));\n      const fileMeshesGroupedByOffsets = groupMeshesByNumber(fileTriangleOffsets);\n\n      for (const [triangleOffset, fileMeshIndices] of fileMeshesGroupedByOffsets) {\n        // NOTE the triangle counts should be the same for all meshes with the same offset,\n        // hence we can look up only fileMeshIndices[0] instead of enumerating here\n        const triangleCount = fileTriangleCounts[fileMeshIndices[0]];\n        const instanceMatrixBuffer = new Float32Array(16 * fileMeshIndices.length);\n        const treeIndicesBuffer = new Float32Array(fileMeshIndices.length);\n        const colorBuffer = new Uint8Array(4 * fileMeshIndices.length);\n        for (let i = 0; i < fileMeshIndices.length; i++) {\n          const meshIdx = meshIndices[fileMeshIndices[i]];\n          const treeIndex = treeIndices[meshIdx];\n          const instanceMatrix = instanceMatrices.slice(meshIdx * 16, meshIdx * 16 + 16);\n          instanceMatrixBuffer.set(instanceMatrix, i * 16);\n          treeIndicesBuffer[i] = treeIndex;\n          const color = colors.slice(meshIdx * 4, meshIdx * 4 + 4);\n          colorBuffer.set(color, i * 4);\n        }\n        instancedMeshes.push({\n          triangleCount,\n          triangleOffset,\n          instanceMatrices: instanceMatrixBuffer,\n          colors: colorBuffer,\n          treeIndices: treeIndicesBuffer\n        });\n      }\n\n      const mesh: InstancedMeshFile = {\n        fileId,\n        indices,\n        vertices,\n        normals,\n        instances: instancedMeshes\n      };\n      finalMeshes.push(mesh);\n    }\n    return finalMeshes;\n  })();\n\n  const sector: SectorGeometry = {\n    treeIndexToNodeIdMap: i3dFile.treeIndexToNodeIdMap,\n    nodeIdToTreeIndexMap: i3dFile.nodeIdToTreeIndexMap,\n    primitives: i3dFile.primitives,\n    instanceMeshes: finalInstanceMeshes,\n    triangleMeshes: finalTriangleMeshes\n  };\n\n  return sector;\n}\n\nfunction groupMeshesByNumber(fileIds: Float64Array) {\n  const meshesGroupedByFile = new Map<number, number[]>();\n  for (let i = 0; i < fileIds.length; ++i) {\n    const fileId = fileIds[i];\n    const oldValue = meshesGroupedByFile.get(fileId);\n    if (oldValue) {\n      meshesGroupedByFile.set(fileId, [...oldValue, i]);\n    } else {\n      meshesGroupedByFile.set(fileId, [i]);\n    }\n  }\n  return meshesGroupedByFile;\n}\n\nfunction createOffsetsArray(array: number[]): number[] {\n  if (array.length === 0) {\n    return [];\n  }\n\n  const offsets = new Array<number>(array.length);\n  offsets[0] = 0;\n  for (let i = 1; i < array.length; i++) {\n    offsets[i] = offsets[i - 1] + array[i - 1];\n  }\n  return offsets;\n}\n","/*!\n * Copyright 2020 Cognite AS\n */\n\nimport { createDetailedGeometry } from \"./createDetailedGeometry\";\nimport type * as rustTypes from \"./pkg/reveal_rs_wrapper\";\nconst rustModule = import(\"./pkg/reveal_rs_wrapper\");\n\nimport { ParseCtmResult, ParsedPrimitives, ParsePrimitiveAttribute, ParseSectorResult, SectorGeometry, SectorQuads } from \"./types\";\n\nexport class RevealParserWorker {\n  public async parseSector(buffer: Uint8Array): Promise<ParseSectorResult> {\n    const rust = await rustModule;\n    const sectorData = rust.parse_and_convert_sector(buffer);\n\n    const instanceMeshes = this.extractInstanceMeshes(sectorData);\n\n    const triangleMeshes = this.extractTriangleMeshes(sectorData);\n\n    const parsedPrimitives = this.extractParsedPrimitives(sectorData);\n\n    const parseResult: ParseSectorResult = {\n      treeIndexToNodeIdMap: sectorData.tree_index_to_node_id_map(),\n      nodeIdToTreeIndexMap: sectorData.node_id_to_tree_index_map(),\n      primitives: parsedPrimitives,\n      instanceMeshes,\n      triangleMeshes,\n    };\n\n    sectorData.free();\n\n    return parseResult;\n  }\n\n  public async parseCtm(buffer: Uint8Array): Promise<ParseCtmResult> {\n    const rust = await rustModule;\n\n    // TODO handle parsing failure\n    const ctm = rust.parse_ctm(buffer);\n\n    const indices = ctm.indices();\n    const vertices = ctm.vertices();\n    const normals = ctm.normals();\n\n    const result = { indices, vertices, normals };\n\n    ctm.free();\n\n    return result;\n  }\n\n  public async parseQuads(buffer: Uint8Array): Promise<SectorQuads> {\n    const rust = await rustModule;\n\n    const sectorData = rust.parse_and_convert_f3df(buffer);\n\n    const result = {\n      buffer: sectorData.faces(),\n      treeIndexToNodeIdMap: sectorData.tree_index_to_node_id_map(),\n      nodeIdToTreeIndexMap: sectorData.node_id_to_tree_index_map(),\n    };\n\n    sectorData.free();\n\n    return result;\n  }\n\n  public async createDetailedGeometry(i3dFile: ParseSectorResult,\n    ctmFiles: Map<string, ParseCtmResult>): Promise<SectorGeometry> {\n    return createDetailedGeometry(i3dFile, ctmFiles);\n  }\n\n  private extractParsedPrimitives(sectorData: rustTypes.Sector) {\n    const boxCollection = sectorData.box_collection();\n    const boxAttributes = this.convertToJSMemory(\n      sectorData.box_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const circleCollection = sectorData.circle_collection();\n    const circleAttributes = this.convertToJSMemory(\n      sectorData.circle_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const coneCollection = sectorData.cone_collection();\n    const coneAttributes = this.convertToJSMemory(\n      sectorData.cone_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const eccentricConeCollection = sectorData.eccentric_cone_collection();\n    const eccentricConeAttributes = this.convertToJSMemory(\n      sectorData.eccentric_cone_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const ellipsoidSegmentCollection = sectorData.ellipsoid_segment_collection();\n    const ellipsoidSegmentAttributes = this.convertToJSMemory(\n      sectorData.ellipsoid_segment_attributes() as Map<\n        string,\n        rustTypes.Attribute\n      >\n    );\n\n    const generalCylinderCollection = sectorData.general_cylinder_collection();\n    const generalCylinderAttributes = this.convertToJSMemory(\n      sectorData.general_cylinder_attributes() as Map<\n        string,\n        rustTypes.Attribute\n      >\n    );\n\n    const generalRingCollection = sectorData.general_ring_collection();\n    const generalRingAttributes = this.convertToJSMemory(\n      sectorData.general_ring_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const nutCollection = sectorData.nut_collection();\n    const nutAttributes = this.convertToJSMemory(\n      sectorData.nut_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const quadCollection = sectorData.quad_collection();\n    const quadAttributes = this.convertToJSMemory(\n      sectorData.quad_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const sphericalSegmentCollection = sectorData.spherical_segment_collection();\n    const sphericalSegmentAttributes = this.convertToJSMemory(\n      sectorData.spherical_segment_attributes() as Map<\n        string,\n        rustTypes.Attribute\n      >\n    );\n\n    const torusSegmentCollection = sectorData.torus_segment_collection();\n    const torusSegmentAttributes = this.convertToJSMemory(\n      sectorData.torus_segment_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const trapeziumCollection = sectorData.trapezium_collection();\n    const trapeziumAttributes = this.convertToJSMemory(\n      sectorData.trapezium_attributes() as Map<string, rustTypes.Attribute>\n    );\n\n    const parsedPrimitives: ParsedPrimitives = {\n      boxCollection,\n      boxAttributes,\n      circleCollection,\n      circleAttributes,\n      coneCollection,\n      coneAttributes,\n      eccentricConeCollection,\n      eccentricConeAttributes,\n      ellipsoidSegmentCollection,\n      ellipsoidSegmentAttributes,\n      generalCylinderCollection,\n      generalCylinderAttributes,\n      generalRingCollection,\n      generalRingAttributes,\n      nutCollection,\n      nutAttributes,\n      quadCollection,\n      quadAttributes,\n      sphericalSegmentCollection,\n      sphericalSegmentAttributes,\n      torusSegmentCollection,\n      torusSegmentAttributes,\n      trapeziumCollection,\n      trapeziumAttributes,\n    };\n\n    return parsedPrimitives;\n  }\n\n  private extractTriangleMeshes(sectorData: rustTypes.Sector) {\n    const collection = sectorData.triangle_mesh_collection();\n\n    const result = {\n      fileIds: collection.file_id().slice(),\n      treeIndices: collection.tree_index().slice(),\n      colors: collection.color().slice(),\n      triangleCounts: collection.triangle_count().slice(),\n      sizes: collection.size().slice(),\n    };\n\n    collection.free();\n\n    return result;\n  }\n\n  private extractInstanceMeshes(sectorData: rustTypes.Sector) {\n    const collection = sectorData.instanced_mesh_collection();\n\n    const result = {\n      fileIds: collection.file_id().slice(),\n      treeIndices: collection.tree_index().slice(),\n      colors: collection.color().slice(),\n      triangleOffsets: collection.triangle_offset().slice(),\n      triangleCounts: collection.triangle_count().slice(),\n      sizes: collection.size().slice(),\n      instanceMatrices: collection.instance_matrix().slice(),\n    };\n\n    collection.free();\n\n    return result;\n  }\n\n  private convertToJSMemory(\n    rustAttributes: Map<string, rustTypes.Attribute>\n  ): Map<string, ParsePrimitiveAttribute> {\n    const jsAttributes = new Map<string, ParsePrimitiveAttribute>();\n\n    for (const entry of rustAttributes.entries()) {\n      const [key, attribute] = entry;\n\n      jsAttributes.set(key, { size: attribute.size, offset: attribute.offset });\n\n      attribute.free();\n    }\n\n    return jsAttributes;\n  }\n}\n\n","/**\r\n * Copyright 2019 Google Inc. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst proxyMarker = Symbol(\"Comlink.proxy\");\r\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\r\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\r\nconst throwMarker = Symbol(\"Comlink.thrown\");\r\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\r\n/**\r\n * Internal transfer handle to handle objects marked to proxy.\r\n */\r\nconst proxyTransferHandler = {\r\n    canHandle: (val) => isObject(val) && val[proxyMarker],\r\n    serialize(obj) {\r\n        const { port1, port2 } = new MessageChannel();\r\n        expose(obj, port1);\r\n        return [port2, [port2]];\r\n    },\r\n    deserialize(port) {\r\n        port.start();\r\n        return wrap(port);\r\n    },\r\n};\r\n/**\r\n * Internal transfer handler to handle thrown exceptions.\r\n */\r\nconst throwTransferHandler = {\r\n    canHandle: (value) => isObject(value) && throwMarker in value,\r\n    serialize({ value }) {\r\n        let serialized;\r\n        if (value instanceof Error) {\r\n            serialized = {\r\n                isError: true,\r\n                value: {\r\n                    message: value.message,\r\n                    name: value.name,\r\n                    stack: value.stack,\r\n                },\r\n            };\r\n        }\r\n        else {\r\n            serialized = { isError: false, value };\r\n        }\r\n        return [serialized, []];\r\n    },\r\n    deserialize(serialized) {\r\n        if (serialized.isError) {\r\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\r\n        }\r\n        throw serialized.value;\r\n    },\r\n};\r\n/**\r\n * Allows customizing the serialization of certain values.\r\n */\r\nconst transferHandlers = new Map([\r\n    [\"proxy\", proxyTransferHandler],\r\n    [\"throw\", throwTransferHandler],\r\n]);\r\nfunction expose(obj, ep = self) {\r\n    ep.addEventListener(\"message\", function callback(ev) {\r\n        if (!ev || !ev.data) {\r\n            return;\r\n        }\r\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\r\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\r\n        let returnValue;\r\n        try {\r\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\r\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\r\n            switch (type) {\r\n                case 0 /* GET */:\r\n                    {\r\n                        returnValue = rawValue;\r\n                    }\r\n                    break;\r\n                case 1 /* SET */:\r\n                    {\r\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\r\n                        returnValue = true;\r\n                    }\r\n                    break;\r\n                case 2 /* APPLY */:\r\n                    {\r\n                        returnValue = rawValue.apply(parent, argumentList);\r\n                    }\r\n                    break;\r\n                case 3 /* CONSTRUCT */:\r\n                    {\r\n                        const value = new rawValue(...argumentList);\r\n                        returnValue = proxy(value);\r\n                    }\r\n                    break;\r\n                case 4 /* ENDPOINT */:\r\n                    {\r\n                        const { port1, port2 } = new MessageChannel();\r\n                        expose(obj, port2);\r\n                        returnValue = transfer(port1, [port1]);\r\n                    }\r\n                    break;\r\n                case 5 /* RELEASE */:\r\n                    {\r\n                        returnValue = undefined;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        catch (value) {\r\n            returnValue = { value, [throwMarker]: 0 };\r\n        }\r\n        Promise.resolve(returnValue)\r\n            .catch((value) => {\r\n            return { value, [throwMarker]: 0 };\r\n        })\r\n            .then((returnValue) => {\r\n            const [wireValue, transferables] = toWireValue(returnValue);\r\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\r\n            if (type === 5 /* RELEASE */) {\r\n                // detach and deactive after sending release response above.\r\n                ep.removeEventListener(\"message\", callback);\r\n                closeEndPoint(ep);\r\n            }\r\n        });\r\n    });\r\n    if (ep.start) {\r\n        ep.start();\r\n    }\r\n}\r\nfunction isMessagePort(endpoint) {\r\n    return endpoint.constructor.name === \"MessagePort\";\r\n}\r\nfunction closeEndPoint(endpoint) {\r\n    if (isMessagePort(endpoint))\r\n        endpoint.close();\r\n}\r\nfunction wrap(ep, target) {\r\n    return createProxy(ep, [], target);\r\n}\r\nfunction throwIfProxyReleased(isReleased) {\r\n    if (isReleased) {\r\n        throw new Error(\"Proxy has been released and is not useable\");\r\n    }\r\n}\r\nfunction createProxy(ep, path = [], target = function () { }) {\r\n    let isProxyReleased = false;\r\n    const proxy = new Proxy(target, {\r\n        get(_target, prop) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            if (prop === releaseProxy) {\r\n                return () => {\r\n                    return requestResponseMessage(ep, {\r\n                        type: 5 /* RELEASE */,\r\n                        path: path.map((p) => p.toString()),\r\n                    }).then(() => {\r\n                        closeEndPoint(ep);\r\n                        isProxyReleased = true;\r\n                    });\r\n                };\r\n            }\r\n            if (prop === \"then\") {\r\n                if (path.length === 0) {\r\n                    return { then: () => proxy };\r\n                }\r\n                const r = requestResponseMessage(ep, {\r\n                    type: 0 /* GET */,\r\n                    path: path.map((p) => p.toString()),\r\n                }).then(fromWireValue);\r\n                return r.then.bind(r);\r\n            }\r\n            return createProxy(ep, [...path, prop]);\r\n        },\r\n        set(_target, prop, rawValue) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\r\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\r\n            const [value, transferables] = toWireValue(rawValue);\r\n            return requestResponseMessage(ep, {\r\n                type: 1 /* SET */,\r\n                path: [...path, prop].map((p) => p.toString()),\r\n                value,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        apply(_target, _thisArg, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const last = path[path.length - 1];\r\n            if (last === createEndpoint) {\r\n                return requestResponseMessage(ep, {\r\n                    type: 4 /* ENDPOINT */,\r\n                }).then(fromWireValue);\r\n            }\r\n            // We just pretend that `bind()` didn’t happen.\r\n            if (last === \"bind\") {\r\n                return createProxy(ep, path.slice(0, -1));\r\n            }\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: 2 /* APPLY */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        construct(_target, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: 3 /* CONSTRUCT */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n    });\r\n    return proxy;\r\n}\r\nfunction myFlat(arr) {\r\n    return Array.prototype.concat.apply([], arr);\r\n}\r\nfunction processArguments(argumentList) {\r\n    const processed = argumentList.map(toWireValue);\r\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\r\n}\r\nconst transferCache = new WeakMap();\r\nfunction transfer(obj, transfers) {\r\n    transferCache.set(obj, transfers);\r\n    return obj;\r\n}\r\nfunction proxy(obj) {\r\n    return Object.assign(obj, { [proxyMarker]: true });\r\n}\r\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\r\n    return {\r\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\r\n        addEventListener: context.addEventListener.bind(context),\r\n        removeEventListener: context.removeEventListener.bind(context),\r\n    };\r\n}\r\nfunction toWireValue(value) {\r\n    for (const [name, handler] of transferHandlers) {\r\n        if (handler.canHandle(value)) {\r\n            const [serializedValue, transferables] = handler.serialize(value);\r\n            return [\r\n                {\r\n                    type: 3 /* HANDLER */,\r\n                    name,\r\n                    value: serializedValue,\r\n                },\r\n                transferables,\r\n            ];\r\n        }\r\n    }\r\n    return [\r\n        {\r\n            type: 0 /* RAW */,\r\n            value,\r\n        },\r\n        transferCache.get(value) || [],\r\n    ];\r\n}\r\nfunction fromWireValue(value) {\r\n    switch (value.type) {\r\n        case 3 /* HANDLER */:\r\n            return transferHandlers.get(value.name).deserialize(value.value);\r\n        case 0 /* RAW */:\r\n            return value.value;\r\n    }\r\n}\r\nfunction requestResponseMessage(ep, msg, transfers) {\r\n    return new Promise((resolve) => {\r\n        const id = generateUUID();\r\n        ep.addEventListener(\"message\", function l(ev) {\r\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\r\n                return;\r\n            }\r\n            ep.removeEventListener(\"message\", l);\r\n            resolve(ev.data);\r\n        });\r\n        if (ep.start) {\r\n            ep.start();\r\n        }\r\n        ep.postMessage(Object.assign({ id }, msg), transfers);\r\n    });\r\n}\r\nfunction generateUUID() {\r\n    return new Array(4)\r\n        .fill(0)\r\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\r\n        .join(\"-\");\r\n}\n\nexport { createEndpoint, expose, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","/*!\n * Copyright 2020 Cognite AS\n */\n\nimport { RevealParserWorker } from './RevealParserWorker';\nimport * as Comlink from \"comlink\";\n\nexport {\n  SectorQuads,\n  SectorGeometry,\n  TriangleMesh,\n  InstancedMesh,\n  InstancedMeshFile,\n  ParsedPrimitives,\n  ParsePrimitiveAttribute,\n  ParseCtmResult,\n  ParseSectorResult\n} from './types';\nexport { RevealParserWorker };\n\n// Bootstrap\nconst obj = new RevealParserWorker();\nComlink.expose(obj);\n"],"sourceRoot":""}
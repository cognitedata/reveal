---
id: node-visiting
title: Node visitor functions
describe: Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
---

import { LiveCodeSnippet } from '../../src/components/LiveCodeSnippet';
import { DemoWrapper } from '../../src/components/DemoWrapper';

Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
Notice that all functions are async, and the action that you pass is not applied immediately.
A single model can have millions of nodes. That's why the iteration functions call the passed action step by step.

<DemoWrapper
  modelId={4715379429968321}
  revisionId={5688854005909501}
  name="Cognite3DViewerDemo"
/>

## Iterate over all nodes

This example only demonstrates how iteration over model nodes performed gradually.
For more efficient coloring consult our [coloring examples](./cad-colors.mdx).

<LiveCodeSnippet>
{`
model
  .iterateNodesByTreeIndex(
    treeIndex => model.setNodeColorByTreeIndex(treeIndex, 127, 127, 127)
  )
  .then(() => console.log('Iteration is done!'));
`}
</LiveCodeSnippet>

## Iterate over subtree nodes

In that example we bind click handler to the viewer and iterate over subtree of the clicked node.

<LiveCodeSnippet>
{`
viewer.on('click', (event) => {
  // Find 3D coordinate of what the user clicks
  const intersection = viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    model.resetAllNodeColors();
    model.iterateSubtreeByTreeIndex(intersection.treeIndex, (i) => {
      console.log(i);
      model.setNodeColorByTreeIndex(i, 127, 127, 127);
    })
  }
});
`}
</LiveCodeSnippet>

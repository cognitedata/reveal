{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo } from 'react';\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { useSDK } from '@cognite/sdk-provider';\nimport { queryKeys } from '../../../queryKeys';\nimport { getSequenceList } from '../network';\nexport const useSequenceListQuery = ({\n  advancedFilter,\n  filter,\n  limit,\n  sort\n} = {}, options) => {\n  _s();\n  const sdk = useSDK();\n  const {\n    data,\n    ...rest\n  } = useInfiniteQuery(queryKeys.listSequence([advancedFilter, filter, limit, sort]), ({\n    pageParam\n  }) => {\n    return getSequenceList(sdk, {\n      cursor: pageParam,\n      filter,\n      advancedFilter,\n      sort,\n      limit\n    });\n  }, {\n    getNextPageParam: param => param.nextCursor,\n    ...options\n  });\n  const flattenData = useMemo(() => (data?.pages || []).flatMap(({\n    items\n  }) => items), [data?.pages]);\n  return {\n    data: flattenData,\n    ...rest\n  };\n};\n_s(useSequenceListQuery, \"6IC/fW+iZi+0XGnsYqC8KTGR+Gw=\", false, function () {\n  return [useSDK, useInfiniteQuery];\n});","map":{"version":3,"names":["useMemo","useInfiniteQuery","useSDK","queryKeys","getSequenceList","useSequenceListQuery","advancedFilter","filter","limit","sort","options","sdk","data","rest","listSequence","pageParam","cursor","getNextPageParam","param","nextCursor","flattenData","pages","flatMap","items"],"sources":["/Volumes/csvol/fusion/libs/data-exploration/domain-layer/src/sequence/service/queries/useSequenceListQuery.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport {\n  useInfiniteQuery,\n  UseInfiniteQueryOptions,\n} from '@tanstack/react-query';\n\nimport { SequenceFilter } from '@cognite/sdk/dist/src';\nimport { useSDK } from '@cognite/sdk-provider';\n\nimport { AdvancedFilter } from '../../../builders';\nimport { queryKeys } from '../../../queryKeys';\nimport { InternalSortBy } from '../../../types';\nimport { SequenceProperties } from '../../internal';\nimport { getSequenceList } from '../network';\n\nexport const useSequenceListQuery = (\n  {\n    advancedFilter,\n    filter,\n    limit,\n    sort,\n  }: {\n    advancedFilter?: AdvancedFilter<SequenceProperties>;\n    filter?: Required<SequenceFilter>['filter'];\n    limit?: number;\n    sort?: InternalSortBy[];\n  } = {},\n  options?: UseInfiniteQueryOptions\n) => {\n  const sdk = useSDK();\n  const { data, ...rest } = useInfiniteQuery(\n    queryKeys.listSequence([advancedFilter, filter, limit, sort]),\n    ({ pageParam }) => {\n      return getSequenceList(sdk, {\n        cursor: pageParam,\n        filter,\n        advancedFilter,\n        sort,\n        limit,\n      });\n    },\n    {\n      getNextPageParam: (param) => param.nextCursor,\n      ...(options as any),\n    }\n  );\n\n  const flattenData = useMemo(\n    () => (data?.pages || []).flatMap(({ items }) => items),\n    [data?.pages]\n  );\n\n  return { data: flattenData, ...rest };\n};\n"],"mappings":";AAAA,SAASA,OAAO,QAAQ,OAAO;AAE/B,SACEC,gBAAgB,QAEX,uBAAuB;AAG9B,SAASC,MAAM,QAAQ,uBAAuB;AAG9C,SAASC,SAAS,QAAQ,oBAAoB;AAG9C,SAASC,eAAe,QAAQ,YAAY;AAE5C,OAAO,MAAMC,oBAAoB,GAAG,CAClC;EACEC,cAAc;EACdC,MAAM;EACNC,KAAK;EACLC;AAMF,CAAC,GAAG,CAAC,CAAC,EACNC,OAAiC,KAC9B;EAAA;EACH,MAAMC,GAAG,GAAGT,MAAM,EAAE;EACpB,MAAM;IAAEU,IAAI;IAAE,GAAGC;EAAK,CAAC,GAAGZ,gBAAgB,CACxCE,SAAS,CAACW,YAAY,CAAC,CAACR,cAAc,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,CAAC,CAAC,EAC7D,CAAC;IAAEM;EAAU,CAAC,KAAK;IACjB,OAAOX,eAAe,CAACO,GAAG,EAAE;MAC1BK,MAAM,EAAED,SAAS;MACjBR,MAAM;MACND,cAAc;MACdG,IAAI;MACJD;IACF,CAAC,CAAC;EACJ,CAAC,EACD;IACES,gBAAgB,EAAGC,KAAK,IAAKA,KAAK,CAACC,UAAU;IAC7C,GAAIT;EACN,CAAC,CACF;EAED,MAAMU,WAAW,GAAGpB,OAAO,CACzB,MAAM,CAACY,IAAI,EAAES,KAAK,IAAI,EAAE,EAAEC,OAAO,CAAC,CAAC;IAAEC;EAAM,CAAC,KAAKA,KAAK,CAAC,EACvD,CAACX,IAAI,EAAES,KAAK,CAAC,CACd;EAED,OAAO;IAAET,IAAI,EAAEQ,WAAW;IAAE,GAAGP;EAAK,CAAC;AACvC,CAAC;AAAC,GAtCWR,oBAAoB;EAAA,QAcnBH,MAAM,EACQD,gBAAgB;AAAA"},"metadata":{},"sourceType":"module"}
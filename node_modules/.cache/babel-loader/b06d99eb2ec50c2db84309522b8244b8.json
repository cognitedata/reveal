{"ast":null,"code":"const createGenericCopilotEventHandler = handler => {\n  const listener = ev => {\n    if ('detail' in ev) {\n      const event = ev;\n      handler(event.detail);\n    }\n  };\n  return listener;\n};\nexport const createFromCopilotEventHandler = handler => createGenericCopilotEventHandler(handler);\nexport const createToCopilotEventHandler = handler => createGenericCopilotEventHandler(handler);\nexport const sendFromCopilotEvent = (eventToWatch, data) => {\n  return window.dispatchEvent(new CustomEvent(`FromCopilot-${eventToWatch}`, {\n    detail: data\n  }));\n};\nexport const sendToCopilotEvent = (eventToWatch, data) => {\n  return window.dispatchEvent(new CustomEvent(`ToCopilot-${eventToWatch}`, {\n    detail: data\n  }));\n};\nexport const addFromCopilotEventListener = (type, listener) => {\n  window.addEventListener(`FromCopilot-${type}`, listener, false);\n  return () => window.removeEventListener(`FromCopilot-${type}`, listener);\n};\nexport const addToCopilotEventListener = (type, listener) => {\n  window.addEventListener(`ToCopilot-${type}`, listener, false);\n  return () => window.removeEventListener(`ToCopilot-${type}`, listener);\n};","map":{"version":3,"names":["createGenericCopilotEventHandler","handler","listener","ev","event","detail","createFromCopilotEventHandler","createToCopilotEventHandler","sendFromCopilotEvent","eventToWatch","data","window","dispatchEvent","CustomEvent","sendToCopilotEvent","addFromCopilotEventListener","type","addEventListener","removeEventListener","addToCopilotEventListener"],"sources":["/Volumes/csvol/fusion/libs/copilot-core/src/lib/utils.ts"],"sourcesContent":["import { CopilotEvents } from './types';\n\nconst createGenericCopilotEventHandler = <\n  E extends CopilotEvents,\n  I extends keyof E,\n  T extends keyof E[I]\n>(\n  handler: (data: E[I][T]) => void\n) => {\n  const listener = (ev: Event) => {\n    if ('detail' in ev) {\n      const event = ev as CustomEvent<E[I][T]>;\n      handler(event.detail);\n    }\n  };\n  return listener;\n};\n\nexport const createFromCopilotEventHandler = <\n  E extends CopilotEvents,\n  T extends keyof E['FromCopilot']\n>(\n  handler: (data: E['FromCopilot'][T]) => void\n) => createGenericCopilotEventHandler<E, 'FromCopilot', T>(handler);\n\nexport const createToCopilotEventHandler = <\n  E extends CopilotEvents,\n  T extends keyof E['ToCopilot']\n>(\n  handler: (data: E['ToCopilot'][T]) => void\n) => createGenericCopilotEventHandler<E, 'ToCopilot', T>(handler);\n\nexport const sendFromCopilotEvent = <\n  E extends CopilotEvents,\n  T extends keyof E['FromCopilot']\n>(\n  eventToWatch: T & string,\n  data: E['FromCopilot'][T]\n) => {\n  return window.dispatchEvent(\n    new CustomEvent(`FromCopilot-${eventToWatch}`, { detail: data })\n  );\n};\n\nexport const sendToCopilotEvent = <\n  E extends CopilotEvents,\n  T extends keyof E['ToCopilot']\n>(\n  eventToWatch: T & string,\n  data: E['ToCopilot'][T]\n) => {\n  return window.dispatchEvent(\n    new CustomEvent(`ToCopilot-${eventToWatch}`, { detail: data })\n  );\n};\n\nexport const addFromCopilotEventListener = <E extends CopilotEvents>(\n  type: keyof E['FromCopilot'],\n  listener: EventListenerOrEventListenerObject\n) => {\n  window.addEventListener(`FromCopilot-${type as string}`, listener, false);\n  return () =>\n    window.removeEventListener(`FromCopilot-${type as string}`, listener);\n};\n\nexport const addToCopilotEventListener = <E extends CopilotEvents>(\n  type: keyof E['ToCopilot'],\n  listener: EventListenerOrEventListenerObject\n) => {\n  window.addEventListener(`ToCopilot-${type as string}`, listener, false);\n  return () =>\n    window.removeEventListener(`ToCopilot-${type as string}`, listener);\n};\n"],"mappings":"AAEA,MAAMA,gCAAgC,GAKpCC,OAAgC,IAC7B;EACH,MAAMC,QAAQ,GAAIC,EAAS,IAAK;IAC9B,IAAI,QAAQ,IAAIA,EAAE,EAAE;MAClB,MAAMC,KAAK,GAAGD,EAA0B;MACxCF,OAAO,CAACG,KAAK,CAACC,MAAM,CAAC;IACvB;EACF,CAAC;EACD,OAAOH,QAAQ;AACjB,CAAC;AAED,OAAO,MAAMI,6BAA6B,GAIxCL,OAA4C,IACzCD,gCAAgC,CAAsBC,OAAO,CAAC;AAEnE,OAAO,MAAMM,2BAA2B,GAItCN,OAA0C,IACvCD,gCAAgC,CAAoBC,OAAO,CAAC;AAEjE,OAAO,MAAMO,oBAAoB,GAAG,CAIlCC,YAAwB,EACxBC,IAAyB,KACtB;EACH,OAAOC,MAAM,CAACC,aAAa,CACzB,IAAIC,WAAW,CAAE,eAAcJ,YAAa,EAAC,EAAE;IAAEJ,MAAM,EAAEK;EAAK,CAAC,CAAC,CACjE;AACH,CAAC;AAED,OAAO,MAAMI,kBAAkB,GAAG,CAIhCL,YAAwB,EACxBC,IAAuB,KACpB;EACH,OAAOC,MAAM,CAACC,aAAa,CACzB,IAAIC,WAAW,CAAE,aAAYJ,YAAa,EAAC,EAAE;IAAEJ,MAAM,EAAEK;EAAK,CAAC,CAAC,CAC/D;AACH,CAAC;AAED,OAAO,MAAMK,2BAA2B,GAAG,CACzCC,IAA4B,EAC5Bd,QAA4C,KACzC;EACHS,MAAM,CAACM,gBAAgB,CAAE,eAAcD,IAAe,EAAC,EAAEd,QAAQ,EAAE,KAAK,CAAC;EACzE,OAAO,MACLS,MAAM,CAACO,mBAAmB,CAAE,eAAcF,IAAe,EAAC,EAAEd,QAAQ,CAAC;AACzE,CAAC;AAED,OAAO,MAAMiB,yBAAyB,GAAG,CACvCH,IAA0B,EAC1Bd,QAA4C,KACzC;EACHS,MAAM,CAACM,gBAAgB,CAAE,aAAYD,IAAe,EAAC,EAAEd,QAAQ,EAAE,KAAK,CAAC;EACvE,OAAO,MACLS,MAAM,CAACO,mBAAmB,CAAE,aAAYF,IAAe,EAAC,EAAEd,QAAQ,CAAC;AACvE,CAAC"},"metadata":{},"sourceType":"module"}